/*!
 * FilePond 4.30.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const qs=e=>e instanceof HTMLElement,Ws=(e,t=[],n=[])=>{const r={...e},s=[],o=[],i=()=>({...r}),a=()=>{const d=[...s];return s.length=0,d},l=()=>{const d=[...o];o.length=0,d.forEach(({type:p,data:_})=>{c(p,_)})},c=(d,p,_)=>{if(_&&!document.hidden){o.push({type:d,data:p});return}m[d]&&m[d](p),s.push({type:d,data:p})},u=(d,...p)=>h[d]?h[d](...p):null,f={getState:i,processActionQueue:a,processDispatchQueue:l,dispatch:c,query:u};let h={};t.forEach(d=>{h={...d(r),...h}});let m={};return n.forEach(d=>{m={...d(c,u,r),...m}}),f},ks=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},W=(e,t)=>{for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])},Se=e=>{const t={};return W(e,n=>{ks(t,n,e[n])}),t},Y=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},$s="http://www.w3.org/2000/svg",Ys=["svg","path"],An=e=>Ys.includes(e),It=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const r=An(e)?document.createElementNS($s,e):document.createElement(e);return t&&(An(e)?Y(r,"class",t):r.className=t),W(n,(s,o)=>{Y(r,s,o)}),r},zs=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},Xs=(e,t)=>(n,r)=>(typeof r<"u"?t.splice(r,0,n):t.push(n),n),js=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),Qs=(()=>typeof window<"u"&&typeof window.document<"u")(),Nr=()=>Qs,Ks=Nr()?It("svg"):{},Zs="children"in Ks?e=>e.children.length:e=>e.childNodes.length,vr=(e,t,n,r)=>{const s=n[0]||e.left,o=n[1]||e.top,i=s+e.width,a=o+e.height*(r[1]||1),l={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:s,top:o,right:i,bottom:a}};return t.filter(c=>!c.isRectIgnored()).map(c=>c.rect).forEach(c=>{wn(l.inner,{...c.inner}),wn(l.outer,{...c.outer})}),Pn(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,Pn(l.outer),l},wn=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},Pn=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},De=e=>typeof e=="number",Js=(e,t,n,r=.001)=>Math.abs(e-t)<r&&Math.abs(n)<r,ei=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let r=null,s=null,o=0,i=!1;const c=Se({interpolate:(u,f)=>{if(i)return;if(!(De(r)&&De(s))){i=!0,o=0;return}const h=-(s-r)*e;o+=h/n,s+=o,o*=t,Js(s,r,o)||f?(s=r,o=0,i=!0,c.onupdate(s),c.oncomplete(s)):c.onupdate(s)},target:{set:u=>{if(De(u)&&!De(s)&&(s=u),r===null&&(r=u,s=u),r=u,s===r||typeof r>"u"){i=!0,o=0,c.onupdate(s),c.oncomplete(s);return}i=!1},get:()=>r},resting:{get:()=>i},onupdate:u=>{},oncomplete:u=>{}});return c},ti=e=>e<.5?2*e*e:-1+(4-2*e)*e,ni=({duration:e=500,easing:t=ti,delay:n=0}={})=>{let r=null,s,o,i=!0,a=!1,l=null;const u=Se({interpolate:(f,h)=>{i||l===null||(r===null&&(r=f),!(f-r<n)&&(s=f-r-n,s>=e||h?(s=1,o=a?0:1,u.onupdate(o*l),u.oncomplete(o*l),i=!0):(o=s/e,u.onupdate((s>=0?t(a?1-o:o):0)*l))))},target:{get:()=>a?0:l,set:f=>{if(l===null){l=f,u.onupdate(f),u.oncomplete(f);return}f<l?(l=1,a=!0):(a=!1,l=f),i=!1,r=null}},resting:{get:()=>i},onupdate:f=>{},oncomplete:f=>{}});return u},bn={spring:ei,tween:ni},ri=(e,t,n)=>{const r=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,s=typeof r=="string"?r:r.type,o=typeof r=="object"?{...r}:{};return bn[s]?bn[s](o):null},ln=(e,t,n,r=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(s=>{e.forEach(o=>{let i=o,a=()=>n[o],l=c=>n[o]=c;typeof o=="object"&&(i=o.key,a=o.getter||a,l=o.setter||l),!(s[i]&&!r)&&(s[i]={get:a,set:l})})})},si=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r})=>{const s={...t},o=[];return W(e,(i,a)=>{const l=ri(a);if(!l)return;l.onupdate=u=>{t[i]=u},l.target=s[i],ln([{key:i,setter:u=>{l.target!==u&&(l.target=u)},getter:()=>t[i]}],[n,r],t,!0),o.push(l)}),{write:i=>{let a=document.hidden,l=!0;return o.forEach(c=>{c.resting||(l=!1),c.interpolate(i,a)}),l},destroy:()=>{}}},ii=e=>(t,n)=>{e.addEventListener(t,n)},oi=e=>(t,n)=>{e.removeEventListener(t,n)},ai=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,viewState:s,view:o})=>{const i=[],a=ii(o.element),l=oi(o.element);return r.on=(c,u)=>{i.push({type:c,fn:u}),a(c,u)},r.off=(c,u)=>{i.splice(i.findIndex(f=>f.type===c&&f.fn===u),1),l(c,u)},{write:()=>!0,destroy:()=>{i.forEach(c=>{l(c.type,c.fn)})}}},li=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{ln(e,n,t)},Z=e=>e!=null,ci={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},ui=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,view:s})=>{const o={...t},i={};ln(e,[n,r],t);const a=()=>[t.translateX||0,t.translateY||0],l=()=>[t.scaleX||0,t.scaleY||0],c=()=>s.rect?vr(s.rect,s.childViews,a(),l()):null;return n.rect={get:c},r.rect={get:c},e.forEach(u=>{t[u]=typeof o[u]>"u"?ci[u]:o[u]}),{write:()=>{if(di(i,t))return fi(s.element,t),Object.assign(i,{...t}),!0},destroy:()=>{}}},di=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},fi=(e,{opacity:t,perspective:n,translateX:r,translateY:s,scaleX:o,scaleY:i,rotateX:a,rotateY:l,rotateZ:c,originX:u,originY:f,width:h,height:m})=>{let d="",p="";(Z(u)||Z(f))&&(p+=`transform-origin: ${u||0}px ${f||0}px;`),Z(n)&&(d+=`perspective(${n}px) `),(Z(r)||Z(s))&&(d+=`translate3d(${r||0}px, ${s||0}px, 0) `),(Z(o)||Z(i))&&(d+=`scale3d(${Z(o)?o:1}, ${Z(i)?i:1}, 1) `),Z(c)&&(d+=`rotateZ(${c}rad) `),Z(a)&&(d+=`rotateX(${a}rad) `),Z(l)&&(d+=`rotateY(${l}rad) `),d.length&&(p+=`transform:${d};`),Z(t)&&(p+=`opacity:${t};`,t===0&&(p+="visibility:hidden;"),t<1&&(p+="pointer-events:none;")),Z(m)&&(p+=`height:${m}px;`),Z(h)&&(p+=`width:${h}px;`);const _=e.elementCurrentStyle||"";(p.length!==_.length||p!==_)&&(e.style.cssText=p,e.elementCurrentStyle=p)},Ei={styles:ui,listeners:ai,animations:si,apis:li},Mn=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),z=({tag:e="div",name:t=null,attributes:n={},read:r=()=>{},write:s=()=>{},create:o=()=>{},destroy:i=()=>{},filterFrameActionsForChild:a=(m,d)=>d,didCreateView:l=()=>{},didWriteView:c=()=>{},ignoreRect:u=!1,ignoreRectUpdate:f=!1,mixins:h=[]}={})=>(m,d={})=>{const p=It(e,`filepond--${t}`,n),_=window.getComputedStyle(p,null),T=Mn();let E=null,I=!1;const y=[],S=[],b={},v={},D=[s],P=[r],G=[i],M=()=>p,L=()=>y.concat(),H=()=>b,w=B=>(K,_e)=>K(B,_e),x=()=>E||(E=vr(T,y,[0,0],[1,1]),E),O=()=>_,A=()=>{E=null,y.forEach(_e=>_e._read()),!(f&&T.width&&T.height)&&Mn(T,p,_);const K={root:ue,props:d,rect:T};P.forEach(_e=>_e(K))},C=(B,K,_e)=>{let ve=K.length===0;return D.forEach(te=>{te({props:d,root:ue,actions:K,timestamp:B,shouldOptimize:_e})===!1&&(ve=!1)}),S.forEach(te=>{te.write(B)===!1&&(ve=!1)}),y.filter(te=>!!te.element.parentNode).forEach(te=>{te._write(B,a(te,K),_e)||(ve=!1)}),y.forEach((te,nt)=>{te.element.parentNode||(ue.appendChild(te.element,nt),te._read(),te._write(B,a(te,K),_e),ve=!1)}),I=ve,c({props:d,root:ue,actions:K,timestamp:B}),ve},N=()=>{S.forEach(B=>B.destroy()),G.forEach(B=>{B({root:ue,props:d})}),y.forEach(B=>B._destroy())},U={element:{get:M},style:{get:O},childViews:{get:L}},q={...U,rect:{get:x},ref:{get:H},is:B=>t===B,appendChild:zs(p),createChildView:w(m),linkView:B=>(y.push(B),B),unlinkView:B=>{y.splice(y.indexOf(B),1)},appendChildView:Xs(p,y),removeChildView:js(p,y),registerWriter:B=>D.push(B),registerReader:B=>P.push(B),registerDestroyer:B=>G.push(B),invalidateLayout:()=>p.layoutCalculated=!1,dispatch:m.dispatch,query:m.query},Ne={element:{get:M},childViews:{get:L},rect:{get:x},resting:{get:()=>I},isRectIgnored:()=>u,_read:A,_write:C,_destroy:N},tt={...U,rect:{get:()=>T}};Object.keys(h).sort((B,K)=>B==="styles"?1:K==="styles"?-1:0).forEach(B=>{const K=Ei[B]({mixinConfig:h[B],viewProps:d,viewState:v,viewInternalAPI:q,viewExternalAPI:Ne,view:Se(tt)});K&&S.push(K)});const ue=Se(q);o({root:ue,props:d});const Gt=Zs(p);return y.forEach((B,K)=>{ue.appendChild(B.element,Gt+K)}),l(ue),Se(Ne)},pi=(e,t,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(e),window[r].writers.push(t);return}window[r]={readers:[e],writers:[t]};const s=window[r],o=1e3/n;let i=null,a=null,l=null,c=null;const u=()=>{document.hidden?(l=()=>window.setTimeout(()=>f(performance.now()),o),c=()=>window.clearTimeout(a)):(l=()=>window.requestAnimationFrame(f),c=()=>window.cancelAnimationFrame(a))};document.addEventListener("visibilitychange",()=>{c&&c(),u(),f(performance.now())});const f=h=>{a=l(f),i||(i=h);const m=h-i;m<=o||(i=h-m%o,s.readers.forEach(d=>d()),s.writers.forEach(d=>d(h)))};return u(),f(performance.now()),{pause:()=>{c(a)}}},ee=(e,t)=>({root:n,props:r,actions:s=[],timestamp:o,shouldOptimize:i})=>{s.filter(a=>e[a.type]).forEach(a=>e[a.type]({root:n,props:r,action:a.data,timestamp:o,shouldOptimize:i})),t&&t({root:n,props:r,actions:s,timestamp:o,shouldOptimize:i})},Ln=(e,t)=>t.parentNode.insertBefore(e,t),Cn=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),Ot=e=>Array.isArray(e),Te=e=>e==null,hi=e=>e.trim(),yt=e=>""+e,mi=(e,t=",")=>Te(e)?[]:Ot(e)?e:yt(e).split(t).map(hi).filter(n=>n.length),Gr=e=>typeof e=="boolean",Fr=e=>Gr(e)?e:e==="true",J=e=>typeof e=="string",xr=e=>De(e)?e:J(e)?yt(e).replace(/[a-z]+/gi,""):0,dt=e=>parseInt(xr(e),10),Nn=e=>parseFloat(xr(e)),qe=e=>De(e)&&isFinite(e)&&Math.floor(e)===e,vn=(e,t=1e3)=>{if(qe(e))return e;let n=yt(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),dt(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),dt(n)*t):dt(n)},Ae=e=>typeof e=="function",Ii=e=>{let t=self,n=e.split("."),r=null;for(;r=n.shift();)if(t=t[r],!t)return null;return t},Gn={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},_i=e=>{const t={};return t.url=J(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},W(Gn,n=>{t[n]=gi(n,e[n],Gn[n],t.timeout,t.headers)}),t.process=e.process||J(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},gi=(e,t,n,r,s)=>{if(t===null)return null;if(typeof t=="function")return t;const o={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:s,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(J(t))return o.url=t,o;if(Object.assign(o,t),J(o.headers)){const i=o.headers.split(/:(.+)/);o.headers={header:i[0],value:i[1]}}return o.withCredentials=Fr(o.withCredentials),o},Ti=e=>_i(e),Ri=e=>e===null,Q=e=>typeof e=="object"&&e!==null,Oi=e=>Q(e)&&J(e.url)&&Q(e.process)&&Q(e.revert)&&Q(e.restore)&&Q(e.fetch),Xt=e=>Ot(e)?"array":Ri(e)?"null":qe(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":Oi(e)?"api":typeof e,yi=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),Si={array:mi,boolean:Fr,int:e=>Xt(e)==="bytes"?vn(e):dt(e),number:Nn,float:Nn,bytes:vn,string:e=>Ae(e)?e:yt(e),function:e=>Ii(e),serverapi:Ti,object:e=>{try{return JSON.parse(yi(e))}catch{return null}}},Di=(e,t)=>Si[t](e),Ur=(e,t,n)=>{if(e===t)return e;let r=Xt(e);if(r!==n){const s=Di(e,n);if(r=Xt(s),s===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=s}return e},Ai=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:r=>{n=Ur(r,e,t)}}},wi=e=>{const t={};return W(e,n=>{const r=e[n];t[n]=Ai(r[0],r[1])}),Se(t)},Pi=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:wi(e)}),St=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),bi=(e,t)=>{const n={};return W(t,r=>{n[r]={get:()=>e.getState().options[r],set:s=>{e.dispatch(`SET_${St(r,"_").toUpperCase()}`,{value:s})}}}),n},Mi=e=>(t,n,r)=>{const s={};return W(e,o=>{const i=St(o,"_").toUpperCase();s[`SET_${i}`]=a=>{try{r.options[o]=a.value}catch{}t(`DID_SET_${i}`,{value:r.options[o]})}}),s},Li=e=>t=>{const n={};return W(e,r=>{n[`GET_${St(r,"_").toUpperCase()}`]=s=>t.options[r]}),n},le={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},cn=()=>Math.random().toString(36).substring(2,11),un=(e,t)=>e.splice(t,1),Ci=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},Dt=()=>{const e=[],t=(r,s)=>{un(e,e.findIndex(o=>o.event===r&&(o.cb===s||!s)))},n=(r,s,o)=>{e.filter(i=>i.event===r).map(i=>i.cb).forEach(i=>Ci(()=>i(...s),o))};return{fireSync:(r,...s)=>{n(r,s,!0)},fire:(r,...s)=>{n(r,s,!1)},on:(r,s)=>{e.push({event:r,cb:s})},onOnce:(r,s)=>{e.push({event:r,cb:(...o)=>{t(r,s),s(...o)}})},off:t}},Br=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r)))},Ni=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],ne=e=>{const t={};return Br(e,t,Ni),t},vi=e=>{e.forEach((t,n)=>{t.released&&un(e,n)})},F={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},j={INPUT:1,LIMBO:2,LOCAL:3},Vr=e=>/[^0-9]+/.exec(e),Hr=()=>Vr(1.1.toLocaleString())[0],Gi=()=>{const e=Hr(),t=1e3.toLocaleString(),n=1e3.toString();return t!==n?Vr(t)[0]:e==="."?",":"."},R={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},dn=[],de=(e,t,n)=>new Promise((r,s)=>{const o=dn.filter(a=>a.key===e).map(a=>a.cb);if(o.length===0){r(t);return}const i=o.shift();o.reduce((a,l)=>a.then(c=>l(c,n)),i(t,n)).then(a=>r(a)).catch(a=>s(a))}),Le=(e,t,n)=>dn.filter(r=>r.key===e).map(r=>r.cb(t,n)),Fi=(e,t)=>dn.push({key:e,cb:t}),xi=e=>Object.assign(Ge,e),_t=()=>({...Ge}),Ui=e=>{W(e,(t,n)=>{Ge[t]&&(Ge[t][0]=Ur(n,Ge[t][0],Ge[t][1]))})},Ge={id:[null,R.STRING],name:["filepond",R.STRING],disabled:[!1,R.BOOLEAN],className:[null,R.STRING],required:[!1,R.BOOLEAN],captureMethod:[null,R.STRING],allowSyncAcceptAttribute:[!0,R.BOOLEAN],allowDrop:[!0,R.BOOLEAN],allowBrowse:[!0,R.BOOLEAN],allowPaste:[!0,R.BOOLEAN],allowMultiple:[!1,R.BOOLEAN],allowReplace:[!0,R.BOOLEAN],allowRevert:[!0,R.BOOLEAN],allowRemove:[!0,R.BOOLEAN],allowProcess:[!0,R.BOOLEAN],allowReorder:[!1,R.BOOLEAN],allowDirectoriesOnly:[!1,R.BOOLEAN],storeAsFile:[!1,R.BOOLEAN],forceRevert:[!1,R.BOOLEAN],maxFiles:[null,R.INT],checkValidity:[!1,R.BOOLEAN],itemInsertLocationFreedom:[!0,R.BOOLEAN],itemInsertLocation:["before",R.STRING],itemInsertInterval:[75,R.INT],dropOnPage:[!1,R.BOOLEAN],dropOnElement:[!0,R.BOOLEAN],dropValidation:[!1,R.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],R.ARRAY],instantUpload:[!0,R.BOOLEAN],maxParallelUploads:[2,R.INT],allowMinimumUploadDuration:[!0,R.BOOLEAN],chunkUploads:[!1,R.BOOLEAN],chunkForce:[!1,R.BOOLEAN],chunkSize:[5e6,R.INT],chunkRetryDelays:[[500,1e3,3e3],R.ARRAY],server:[null,R.SERVER_API],fileSizeBase:[1e3,R.INT],labelFileSizeBytes:["bytes",R.STRING],labelFileSizeKilobytes:["KB",R.STRING],labelFileSizeMegabytes:["MB",R.STRING],labelFileSizeGigabytes:["GB",R.STRING],labelDecimalSeparator:[Hr(),R.STRING],labelThousandsSeparator:[Gi(),R.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',R.STRING],labelInvalidField:["Field contains invalid files",R.STRING],labelFileWaitingForSize:["Waiting for size",R.STRING],labelFileSizeNotAvailable:["Size not available",R.STRING],labelFileCountSingular:["file in list",R.STRING],labelFileCountPlural:["files in list",R.STRING],labelFileLoading:["Loading",R.STRING],labelFileAdded:["Added",R.STRING],labelFileLoadError:["Error during load",R.STRING],labelFileRemoved:["Removed",R.STRING],labelFileRemoveError:["Error during remove",R.STRING],labelFileProcessing:["Uploading",R.STRING],labelFileProcessingComplete:["Upload complete",R.STRING],labelFileProcessingAborted:["Upload cancelled",R.STRING],labelFileProcessingError:["Error during upload",R.STRING],labelFileProcessingRevertError:["Error during revert",R.STRING],labelTapToCancel:["tap to cancel",R.STRING],labelTapToRetry:["tap to retry",R.STRING],labelTapToUndo:["tap to undo",R.STRING],labelButtonRemoveItem:["Remove",R.STRING],labelButtonAbortItemLoad:["Abort",R.STRING],labelButtonRetryItemLoad:["Retry",R.STRING],labelButtonAbortItemProcessing:["Cancel",R.STRING],labelButtonUndoItemProcessing:["Undo",R.STRING],labelButtonRetryItemProcessing:["Retry",R.STRING],labelButtonProcessItem:["Upload",R.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',R.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',R.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',R.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',R.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',R.STRING],oninit:[null,R.FUNCTION],onwarning:[null,R.FUNCTION],onerror:[null,R.FUNCTION],onactivatefile:[null,R.FUNCTION],oninitfile:[null,R.FUNCTION],onaddfilestart:[null,R.FUNCTION],onaddfileprogress:[null,R.FUNCTION],onaddfile:[null,R.FUNCTION],onprocessfilestart:[null,R.FUNCTION],onprocessfileprogress:[null,R.FUNCTION],onprocessfileabort:[null,R.FUNCTION],onprocessfilerevert:[null,R.FUNCTION],onprocessfile:[null,R.FUNCTION],onprocessfiles:[null,R.FUNCTION],onremovefile:[null,R.FUNCTION],onpreparefile:[null,R.FUNCTION],onupdatefiles:[null,R.FUNCTION],onreorderfiles:[null,R.FUNCTION],beforeDropFile:[null,R.FUNCTION],beforeAddFile:[null,R.FUNCTION],beforeRemoveFile:[null,R.FUNCTION],beforePrepareFile:[null,R.FUNCTION],stylePanelLayout:[null,R.STRING],stylePanelAspectRatio:[null,R.STRING],styleItemPanelAspectRatio:[null,R.STRING],styleButtonRemoveItemPosition:["left",R.STRING],styleButtonProcessItemPosition:["right",R.STRING],styleLoadIndicatorPosition:["right",R.STRING],styleProgressIndicatorPosition:["right",R.STRING],styleButtonRemoveItemAlign:[!1,R.BOOLEAN],files:[[],R.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],R.ARRAY]},we=(e,t)=>Te(t)?e[0]||null:qe(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),qr=e=>{if(Te(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},fe=e=>e.filter(t=>!t.archived),Bi={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let rt=null;const Vi=()=>{if(rt===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,rt=t.files.length===1}catch{rt=!1}return rt},Hi=[F.LOAD_ERROR,F.PROCESSING_ERROR,F.PROCESSING_REVERT_ERROR],qi=[F.LOADING,F.PROCESSING,F.PROCESSING_QUEUED,F.INIT],Wi=[F.PROCESSING_COMPLETE],ki=e=>Hi.includes(e.status),$i=e=>qi.includes(e.status),Yi=e=>Wi.includes(e.status),Fn=e=>Q(e.options.server)&&(Q(e.options.server.process)||Ae(e.options.server.process)),zi=e=>({GET_STATUS:()=>{const t=fe(e.items),{EMPTY:n,ERROR:r,BUSY:s,IDLE:o,READY:i}=Bi;return t.length===0?n:t.some(ki)?r:t.some($i)?s:t.some(Yi)?i:o},GET_ITEM:t=>we(e.items,t),GET_ACTIVE_ITEM:t=>we(fe(e.items),t),GET_ACTIVE_ITEMS:()=>fe(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=we(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=we(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:qr(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>fe(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>fe(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&Vi()&&!Fn(e),IS_ASYNC:()=>Fn(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),Xi=e=>{const t=fe(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},Wr=(e,t,n)=>Math.max(Math.min(n,e),t),ji=(e,t,n)=>e.splice(t,0,n),Qi=(e,t,n)=>Te(t)?null:typeof n>"u"?(e.push(t),t):(n=Wr(n,0,e.length),ji(e,n,t),t),jt=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),Ze=e=>e.split("/").pop().split("?").shift(),At=e=>e.split(".").pop(),Ki=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},ke=(e,t="")=>(t+e).slice(-t.length),kr=(e=new Date)=>`${e.getFullYear()}-${ke(e.getMonth()+1,"00")}-${ke(e.getDate(),"00")}_${ke(e.getHours(),"00")}-${ke(e.getMinutes(),"00")}-${ke(e.getSeconds(),"00")}`,Be=(e,t,n=null,r=null)=>{const s=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return s.lastModifiedDate=new Date,e._relativePath&&(s._relativePath=e._relativePath),J(t)||(t=kr()),t&&r===null&&At(t)?s.name=t:(r=r||Ki(s.type),s.name=t+(r?"."+r:"")),s},Zi=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,$r=(e,t)=>{const n=Zi();if(n){const r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},Ji=(e,t)=>{const n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return $r(n,t)},Yr=e=>(/^data:(.+);/.exec(e)||[])[1]||null,eo=e=>e.split(",")[1].replace(/\s/g,""),to=e=>atob(eo(e)),no=e=>{const t=Yr(e),n=to(e);return Ji(n,t)},ro=(e,t,n)=>Be(no(e),t,null,n),so=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},io=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},oo=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,fn=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let r of n){const s=so(r);if(s){t.name=s;continue}const o=io(r);if(o){t.size=o;continue}const i=oo(r);if(i){t.source=i;continue}}return t},ao=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,r=()=>{t.request&&t.request.abort&&t.request.abort()},s=()=>{const a=t.source;i.fire("init",a),a instanceof File?i.fire("load",a):a instanceof Blob?i.fire("load",Be(a,a.name)):jt(a)?i.fire("load",ro(a)):o(a)},o=a=>{if(!e){i.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(a,l=>{t.duration=Date.now()-t.timestamp,t.complete=!0,l instanceof Blob&&(l=Be(l,l.name||Ze(a))),i.fire("load",l instanceof Blob?l:l?l.body:null)},l=>{i.fire("error",typeof l=="string"?{type:"error",code:0,body:l}:l)},(l,c,u)=>{if(u&&(t.size=u),t.duration=Date.now()-t.timestamp,!l){t.progress=null;return}t.progress=c/u,i.fire("progress",t.progress)},()=>{i.fire("abort")},l=>{const c=fn(typeof l=="string"?l:l.headers);i.fire("meta",{size:t.size||c.size,filename:c.name,source:c.source})})},i={...Dt(),setSource:a=>t.source=a,getProgress:n,abort:r,load:s};return i},xn=e=>/GET|HEAD/.test(e),Pe=(e,t,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{s=!0,i.abort()}};let s=!1,o=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),xn(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const i=new XMLHttpRequest,a=xn(n.method)?i:i.upload;return a.onprogress=l=>{s||r.onprogress(l.lengthComputable,l.loaded,l.total)},i.onreadystatechange=()=>{i.readyState<2||i.readyState===4&&i.status===0||o||(o=!0,r.onheaders(i))},i.onload=()=>{i.status>=200&&i.status<300?r.onload(i):r.onerror(i)},i.onerror=()=>r.onerror(i),i.onabort=()=>{s=!0,r.onabort()},i.ontimeout=()=>r.ontimeout(i),i.open(n.method,t,!0),qe(n.timeout)&&(i.timeout=n.timeout),Object.keys(n.headers).forEach(l=>{const c=unescape(encodeURIComponent(n.headers[l]));i.setRequestHeader(l,c)}),n.responseType&&(i.responseType=n.responseType),n.withCredentials&&(i.withCredentials=!0),i.send(e),r},k=(e,t,n,r)=>({type:e,code:t,body:n,headers:r}),be=e=>t=>{e(k("error",0,"Timeout",t.getAllResponseHeaders()))},Un=e=>/\?/.test(e),Xe=(...e)=>{let t="";return e.forEach(n=>{t+=Un(t)&&Un(n)?n.replace(/\?/,"&"):n}),t},Ft=(e="",t)=>{if(typeof t=="function")return t;if(!t||!J(t.url))return null;const n=t.onload||(s=>s),r=t.onerror||(s=>null);return(s,o,i,a,l,c)=>{const u=Pe(s,Xe(e,t.url),{...t,responseType:"blob"});return u.onload=f=>{const h=f.getAllResponseHeaders(),m=fn(h).name||Ze(s);o(k("load",f.status,t.method==="HEAD"?null:Be(n(f.response),m),h))},u.onerror=f=>{i(k("error",f.status,r(f.response)||f.statusText,f.getAllResponseHeaders()))},u.onheaders=f=>{c(k("headers",f.status,null,f.getAllResponseHeaders()))},u.ontimeout=be(i),u.onprogress=a,u.onabort=l,u}},ie={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},lo=(e,t,n,r,s,o,i,a,l,c,u)=>{const f=[],{chunkTransferId:h,chunkServer:m,chunkSize:d,chunkRetryDelays:p}=u,_={serverId:h,aborted:!1},T=t.ondata||(w=>w),E=t.onload||((w,x)=>x==="HEAD"?w.getResponseHeader("Upload-Offset"):w.response),I=t.onerror||(w=>null),y=w=>{const x=new FormData;Q(s)&&x.append(n,JSON.stringify(s));const O=typeof t.headers=="function"?t.headers(r,s):{...t.headers,"Upload-Length":r.size},A={...t,headers:O},C=Pe(T(x),Xe(e,t.url),A);C.onload=N=>w(E(N,A.method)),C.onerror=N=>i(k("error",N.status,I(N.response)||N.statusText,N.getAllResponseHeaders())),C.ontimeout=be(i)},S=w=>{const x=Xe(e,m.url,_.serverId),A={headers:typeof t.headers=="function"?t.headers(_.serverId):{...t.headers},method:"HEAD"},C=Pe(null,x,A);C.onload=N=>w(E(N,A.method)),C.onerror=N=>i(k("error",N.status,I(N.response)||N.statusText,N.getAllResponseHeaders())),C.ontimeout=be(i)},b=Math.floor(r.size/d);for(let w=0;w<=b;w++){const x=w*d,O=r.slice(x,x+d,"application/offset+octet-stream");f[w]={index:w,size:O.size,offset:x,data:O,file:r,progress:0,retries:[...p],status:ie.QUEUED,error:null,request:null,timeout:null}}const v=()=>o(_.serverId),D=w=>w.status===ie.QUEUED||w.status===ie.ERROR,P=w=>{if(_.aborted)return;if(w=w||f.find(D),!w){f.every(U=>U.status===ie.COMPLETE)&&v();return}w.status=ie.PROCESSING,w.progress=null;const x=m.ondata||(U=>U),O=m.onerror||(U=>null),A=Xe(e,m.url,_.serverId),C=typeof m.headers=="function"?m.headers(w):{...m.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":w.offset,"Upload-Length":r.size,"Upload-Name":r.name},N=w.request=Pe(x(w.data),A,{...m,headers:C});N.onload=()=>{w.status=ie.COMPLETE,w.request=null,L()},N.onprogress=(U,q,Ne)=>{w.progress=U?q:null,M()},N.onerror=U=>{w.status=ie.ERROR,w.request=null,w.error=O(U.response)||U.statusText,G(w)||i(k("error",U.status,O(U.response)||U.statusText,U.getAllResponseHeaders()))},N.ontimeout=U=>{w.status=ie.ERROR,w.request=null,G(w)||be(i)(U)},N.onabort=()=>{w.status=ie.QUEUED,w.request=null,l()}},G=w=>w.retries.length===0?!1:(w.status=ie.WAITING,clearTimeout(w.timeout),w.timeout=setTimeout(()=>{P(w)},w.retries.shift()),!0),M=()=>{const w=f.reduce((O,A)=>O===null||A.progress===null?null:O+A.progress,0);if(w===null)return a(!1,0,0);const x=f.reduce((O,A)=>O+A.size,0);a(!0,w,x)},L=()=>{f.filter(x=>x.status===ie.PROCESSING).length>=1||P()},H=()=>{f.forEach(w=>{clearTimeout(w.timeout),w.request&&w.request.abort()})};return _.serverId?S(w=>{_.aborted||(f.filter(x=>x.offset<w).forEach(x=>{x.status=ie.COMPLETE,x.progress=x.size}),L())}):y(w=>{_.aborted||(c(w),_.serverId=w,L())}),{abort:()=>{_.aborted=!0,H()}}},co=(e,t,n,r)=>(s,o,i,a,l,c,u)=>{if(!s)return;const f=r.chunkUploads,h=f&&s.size>r.chunkSize,m=f&&(h||r.chunkForce);if(s instanceof Blob&&m)return lo(e,t,n,s,o,i,a,l,c,u,r);const d=t.ondata||(S=>S),p=t.onload||(S=>S),_=t.onerror||(S=>null),T=typeof t.headers=="function"?t.headers(s,o)||{}:{...t.headers},E={...t,headers:T};var I=new FormData;Q(o)&&I.append(n,JSON.stringify(o)),(s instanceof Blob?[{name:null,file:s}]:s).forEach(S=>{I.append(n,S.file,S.name===null?S.file.name:`${S.name}${S.file.name}`)});const y=Pe(d(I),Xe(e,t.url),E);return y.onload=S=>{i(k("load",S.status,p(S.response),S.getAllResponseHeaders()))},y.onerror=S=>{a(k("error",S.status,_(S.response)||S.statusText,S.getAllResponseHeaders()))},y.ontimeout=be(a),y.onprogress=l,y.onabort=c,y},uo=(e="",t,n,r)=>typeof t=="function"?(...s)=>t(n,...s,r):!t||!J(t.url)?null:co(e,t,n,r),$e=(e="",t)=>{if(typeof t=="function")return t;if(!t||!J(t.url))return(s,o)=>o();const n=t.onload||(s=>s),r=t.onerror||(s=>null);return(s,o,i)=>{const a=Pe(s,e+t.url,t);return a.onload=l=>{o(k("load",l.status,n(l.response),l.getAllResponseHeaders()))},a.onerror=l=>{i(k("error",l.status,r(l.response)||l.statusText,l.getAllResponseHeaders()))},a.ontimeout=be(i),a}},zr=(e=0,t=1)=>e+Math.random()*(t-e),fo=(e,t=1e3,n=0,r=25,s=250)=>{let o=null;const i=Date.now(),a=()=>{let l=Date.now()-i,c=zr(r,s);l+c>t&&(c=l+c-t);let u=l/t;if(u>=1||document.hidden){e(1);return}e(u),o=setTimeout(a,c)};return t>0&&a(),{clear:()=>{clearTimeout(o)}}},Eo=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=t,s=(u,f)=>{const h=()=>{n.duration===0||n.progress===null||c.fire("progress",c.getProgress())},m=()=>{n.complete=!0,c.fire("load-perceived",n.response.body)};c.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=fo(d=>{n.perceivedProgress=d,n.perceivedDuration=Date.now()-n.timestamp,h(),n.response&&n.perceivedProgress===1&&!n.complete&&m()},r?zr(750,1500):0),n.request=e(u,f,d=>{n.response=Q(d)?d:{type:"load",code:200,body:`${d}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,c.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&m()},d=>{n.perceivedPerformanceUpdater.clear(),c.fire("error",Q(d)?d:{type:"error",code:0,body:`${d}`})},(d,p,_)=>{n.duration=Date.now()-n.timestamp,n.progress=d?p/_:null,h()},()=>{n.perceivedPerformanceUpdater.clear(),c.fire("abort",n.response?n.response.body:null)},d=>{c.fire("transfer",d)})},o=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},i=()=>{o(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},a=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,l=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,c={...Dt(),process:s,abort:o,getProgress:a,getDuration:l,reset:i};return c},Xr=e=>e.substring(0,e.lastIndexOf("."))||e,po=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||jt(e)?t[0]=e.name||kr():jt(e)?(t[1]=e.length,t[2]=Yr(e)):J(e)&&(t[0]=Ze(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},Ve=e=>!!(e instanceof File||e instanceof Blob&&e.name),jr=e=>{if(!Q(e))return e;const t=Ot(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];t[n]=r&&Q(r)?jr(r):r}return t},ho=(e=null,t=null,n=null)=>{const r=cn(),s={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?F.PROCESSING_COMPLETE:F.INIT,activeLoader:null,activeProcessor:null};let o=null;const i={},a=D=>s.status=D,l=(D,...P)=>{s.released||s.frozen||b.fire(D,...P)},c=()=>At(s.file.name),u=()=>s.file.type,f=()=>s.file.size,h=()=>s.file,m=(D,P,G)=>{if(s.source=D,b.fireSync("init"),s.file){b.fireSync("load-skip");return}s.file=po(D),P.on("init",()=>{l("load-init")}),P.on("meta",M=>{s.file.size=M.size,s.file.filename=M.filename,M.source&&(e=j.LIMBO,s.serverFileReference=M.source,s.status=F.PROCESSING_COMPLETE),l("load-meta")}),P.on("progress",M=>{a(F.LOADING),l("load-progress",M)}),P.on("error",M=>{a(F.LOAD_ERROR),l("load-request-error",M)}),P.on("abort",()=>{a(F.INIT),l("load-abort")}),P.on("load",M=>{s.activeLoader=null;const L=w=>{s.file=Ve(w)?w:s.file,e===j.LIMBO&&s.serverFileReference?a(F.PROCESSING_COMPLETE):a(F.IDLE),l("load")},H=w=>{s.file=M,l("load-meta"),a(F.LOAD_ERROR),l("load-file-error",w)};if(s.serverFileReference){L(M);return}G(M,L,H)}),P.setSource(D),s.activeLoader=P,P.load()},d=()=>{s.activeLoader&&s.activeLoader.load()},p=()=>{if(s.activeLoader){s.activeLoader.abort();return}a(F.INIT),l("load-abort")},_=(D,P)=>{if(s.processingAborted){s.processingAborted=!1;return}if(a(F.PROCESSING),o=null,!(s.file instanceof Blob)){b.on("load",()=>{_(D,P)});return}D.on("load",L=>{s.transferId=null,s.serverFileReference=L}),D.on("transfer",L=>{s.transferId=L}),D.on("load-perceived",L=>{s.activeProcessor=null,s.transferId=null,s.serverFileReference=L,a(F.PROCESSING_COMPLETE),l("process-complete",L)}),D.on("start",()=>{l("process-start")}),D.on("error",L=>{s.activeProcessor=null,a(F.PROCESSING_ERROR),l("process-error",L)}),D.on("abort",L=>{s.activeProcessor=null,s.serverFileReference=L,a(F.IDLE),l("process-abort"),o&&o()}),D.on("progress",L=>{l("process-progress",L)});const G=L=>{s.archived||D.process(L,{...i})},M=console.error;P(s.file,G,M),s.activeProcessor=D},T=()=>{s.processingAborted=!1,a(F.PROCESSING_QUEUED)},E=()=>new Promise(D=>{if(!s.activeProcessor){s.processingAborted=!0,a(F.IDLE),l("process-abort"),D();return}o=()=>{D()},s.activeProcessor.abort()}),I=(D,P)=>new Promise((G,M)=>{const L=s.serverFileReference!==null?s.serverFileReference:s.transferId;if(L===null){G();return}D(L,()=>{s.serverFileReference=null,s.transferId=null,G()},H=>{if(!P){G();return}a(F.PROCESSING_REVERT_ERROR),l("process-revert-error"),M(H)}),a(F.IDLE),l("process-revert")}),y=(D,P,G)=>{const M=D.split("."),L=M[0],H=M.pop();let w=i;M.forEach(x=>w=w[x]),JSON.stringify(w[H])!==JSON.stringify(P)&&(w[H]=P,l("metadata-update",{key:L,value:i[L],silent:G}))},b={id:{get:()=>r},origin:{get:()=>e,set:D=>e=D},serverId:{get:()=>s.serverFileReference},transferId:{get:()=>s.transferId},status:{get:()=>s.status},filename:{get:()=>s.file.name},filenameWithoutExtension:{get:()=>Xr(s.file.name)},fileExtension:{get:c},fileType:{get:u},fileSize:{get:f},file:{get:h},relativePath:{get:()=>s.file._relativePath},source:{get:()=>s.source},getMetadata:D=>jr(D?i[D]:i),setMetadata:(D,P,G)=>{if(Q(D)){const M=D;return Object.keys(M).forEach(L=>{y(L,M[L],P)}),D}return y(D,P,G),P},extend:(D,P)=>v[D]=P,abortLoad:p,retryLoad:d,requestProcessing:T,abortProcessing:E,load:m,process:_,revert:I,...Dt(),freeze:()=>s.frozen=!0,release:()=>s.released=!0,released:{get:()=>s.released},archive:()=>s.archived=!0,archived:{get:()=>s.archived}},v=Se(b);return v},mo=(e,t)=>Te(t)?0:J(t)?e.findIndex(n=>n.id===t):-1,Bn=(e,t)=>{const n=mo(e,t);if(!(n<0))return e[n]||null},Vn=(e,t,n,r,s,o)=>{const i=Pe(null,e,{method:"GET",responseType:"blob"});return i.onload=a=>{const l=a.getAllResponseHeaders(),c=fn(l).name||Ze(e);t(k("load",a.status,Be(a.response,c),l))},i.onerror=a=>{n(k("error",a.status,a.statusText,a.getAllResponseHeaders()))},i.onheaders=a=>{o(k("headers",a.status,null,a.getAllResponseHeaders()))},i.ontimeout=be(n),i.onprogress=r,i.onabort=s,i},Hn=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),Io=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&Hn(location.href)!==Hn(e),st=e=>(...t)=>Ae(e)?e(...t):e,_o=e=>!Ve(e.file),xt=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:fe(t.items)})},0)},qn=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const r=e(...t);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),Ut=(e,t)=>{e.items.sort((n,r)=>t(ne(n),ne(r)))},oe=(e,t)=>({query:n,success:r=()=>{},failure:s=()=>{},...o}={})=>{const i=we(e.items,n);if(!i){s({error:k("error",0,"Item not found"),file:null});return}t(i,r,s,o||{})},go=(e,t,n)=>({ABORT_ALL:()=>{fe(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const s=r.map(i=>({source:i.source?i.source:i,options:i.options}));let o=fe(n.items);o.forEach(i=>{s.find(a=>a.source===i.source||a.source===i.file)||e("REMOVE_ITEM",{query:i,remove:!1})}),o=fe(n.items),s.forEach((i,a)=>{o.find(l=>l.source===i.source||l.file===i.source)||e("ADD_ITEM",{...i,interactionMethod:le.NONE,index:a})})},DID_UPDATE_ITEM_METADATA:({id:r,action:s,change:o})=>{o.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const i=Bn(n.items,r);if(!t("IS_ASYNC")){de("SHOULD_PREPARE_OUTPUT",!1,{item:i,query:t,action:s,change:o}).then(u=>{const f=t("GET_BEFORE_PREPARE_FILE");f&&(u=f(i,u)),u&&e("REQUEST_PREPARE_OUTPUT",{query:r,item:i,success:h=>{e("DID_PREPARE_OUTPUT",{id:r,file:h})}},!0)});return}i.origin===j.LOCAL&&e("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.source});const a=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:r})},32)},l=u=>{i.revert($e(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(u?a:()=>{}).catch(()=>{})},c=u=>{i.abortProcessing().then(u?a:()=>{})};if(i.status===F.PROCESSING_COMPLETE)return l(n.options.instantUpload);if(i.status===F.PROCESSING)return c(n.options.instantUpload);n.options.instantUpload&&a()},0))},MOVE_ITEM:({query:r,index:s})=>{const o=we(n.items,r);if(!o)return;const i=n.items.indexOf(o);s=Wr(s,0,n.items.length-1),i!==s&&n.items.splice(s,0,n.items.splice(i,1)[0])},SORT:({compare:r})=>{Ut(n,r),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:s,interactionMethod:o,success:i=()=>{},failure:a=()=>{}})=>{let l=s;if(s===-1||typeof s>"u"){const m=t("GET_ITEM_INSERT_LOCATION"),d=t("GET_TOTAL_ITEMS");l=m==="before"?0:d}const c=t("GET_IGNORED_FILES"),u=m=>Ve(m)?!c.includes(m.name.toLowerCase()):!Te(m),h=r.filter(u).map(m=>new Promise((d,p)=>{e("ADD_ITEM",{interactionMethod:o,source:m.source||m,success:d,failure:p,index:l++,options:m.options||{}})}));Promise.all(h).then(i).catch(a)},ADD_ITEM:({source:r,index:s=-1,interactionMethod:o,success:i=()=>{},failure:a=()=>{},options:l={}})=>{if(Te(r)){a({error:k("error",0,"No source"),file:null});return}if(Ve(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!Xi(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const E=k("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:r,error:E}),a({error:E,file:null});return}const T=fe(n.items)[0];if(T.status===F.PROCESSING_COMPLETE||T.status===F.PROCESSING_REVERT_ERROR){const E=t("GET_FORCE_REVERT");if(T.revert($e(n.options.server.url,n.options.server.revert),E).then(()=>{E&&e("ADD_ITEM",{source:r,index:s,interactionMethod:o,success:i,failure:a,options:l})}).catch(()=>{}),E)return}e("REMOVE_ITEM",{query:T.id})}const c=l.type==="local"?j.LOCAL:l.type==="limbo"?j.LIMBO:j.INPUT,u=ho(c,c===j.INPUT?null:r,l.file);Object.keys(l.metadata||{}).forEach(T=>{u.setMetadata(T,l.metadata[T])}),Le("DID_CREATE_ITEM",u,{query:t,dispatch:e});const f=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(s=f==="before"?-1:n.items.length),Qi(n.items,u,s),Ae(f)&&r&&Ut(n,f);const h=u.id;u.on("init",()=>{e("DID_INIT_ITEM",{id:h})}),u.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:h})}),u.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:h})}),u.on("load-progress",T=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:h,progress:T})}),u.on("load-request-error",T=>{const E=st(n.options.labelFileLoadError)(T);if(T.code>=400&&T.code<500){e("DID_THROW_ITEM_INVALID",{id:h,error:T,status:{main:E,sub:`${T.code} (${T.body})`}}),a({error:T,file:ne(u)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:h,error:T,status:{main:E,sub:n.options.labelTapToRetry}})}),u.on("load-file-error",T=>{e("DID_THROW_ITEM_INVALID",{id:h,error:T.status,status:T.status}),a({error:T.status,file:ne(u)})}),u.on("load-abort",()=>{e("REMOVE_ITEM",{query:h})}),u.on("load-skip",()=>{e("COMPLETE_LOAD_ITEM",{query:h,item:u,data:{source:r,success:i}})}),u.on("load",()=>{const T=E=>{if(!E){e("REMOVE_ITEM",{query:h});return}u.on("metadata-update",I=>{e("DID_UPDATE_ITEM_METADATA",{id:h,change:I})}),de("SHOULD_PREPARE_OUTPUT",!1,{item:u,query:t}).then(I=>{const y=t("GET_BEFORE_PREPARE_FILE");y&&(I=y(u,I));const S=()=>{e("COMPLETE_LOAD_ITEM",{query:h,item:u,data:{source:r,success:i}}),xt(e,n)};if(I){e("REQUEST_PREPARE_OUTPUT",{query:h,item:u,success:b=>{e("DID_PREPARE_OUTPUT",{id:h,file:b}),S()}},!0);return}S()})};de("DID_LOAD_ITEM",u,{query:t,dispatch:e}).then(()=>{qn(t("GET_BEFORE_ADD_FILE"),ne(u)).then(T)}).catch(E=>{if(!E||!E.error||!E.status)return T(!1);e("DID_THROW_ITEM_INVALID",{id:h,error:E.error,status:E.status})})}),u.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:h})}),u.on("process-progress",T=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:h,progress:T})}),u.on("process-error",T=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:h,error:T,status:{main:st(n.options.labelFileProcessingError)(T),sub:n.options.labelTapToRetry}})}),u.on("process-revert-error",T=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:h,error:T,status:{main:st(n.options.labelFileProcessingRevertError)(T),sub:n.options.labelTapToRetry}})}),u.on("process-complete",T=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:h,error:null,serverFileReference:T}),e("DID_DEFINE_VALUE",{id:h,value:T})}),u.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:h})}),u.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:h}),e("DID_DEFINE_VALUE",{id:h,value:null})}),e("DID_ADD_ITEM",{id:h,index:s,interactionMethod:o}),xt(e,n);const{url:m,load:d,restore:p,fetch:_}=n.options.server||{};u.load(r,ao(c===j.INPUT?J(r)&&Io(r)&&_?Ft(m,_):Vn:c===j.LIMBO?Ft(m,p):Ft(m,d)),(T,E,I)=>{de("LOAD_FILE",T,{query:t}).then(E).catch(I)})},REQUEST_PREPARE_OUTPUT:({item:r,success:s,failure:o=()=>{}})=>{const i={error:k("error",0,"Item not found"),file:null};if(r.archived)return o(i);de("PREPARE_OUTPUT",r.file,{query:t,item:r}).then(a=>{de("COMPLETE_PREPARE_OUTPUT",a,{query:t,item:r}).then(l=>{if(r.archived)return o(i);s(l)})})},COMPLETE_LOAD_ITEM:({item:r,data:s})=>{const{success:o,source:i}=s,a=t("GET_ITEM_INSERT_LOCATION");if(Ae(a)&&i&&Ut(n,a),e("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===j.INPUT?null:i}),o(ne(r)),r.origin===j.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===j.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:i}),e("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||i});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:oe(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:oe(n,(r,s,o)=>{e("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:i=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:i}),s({file:r,output:i})},failure:o},!0)}),REQUEST_ITEM_PROCESSING:oe(n,(r,s,o)=>{if(!(r.status===F.IDLE||r.status===F.PROCESSING_ERROR)){const a=()=>e("REQUEST_ITEM_PROCESSING",{query:r,success:s,failure:o}),l=()=>document.hidden?a():setTimeout(a,32);r.status===F.PROCESSING_COMPLETE||r.status===F.PROCESSING_REVERT_ERROR?r.revert($e(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(l).catch(()=>{}):r.status===F.PROCESSING&&r.abortProcessing().then(l);return}r.status!==F.PROCESSING_QUEUED&&(r.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),e("PROCESS_ITEM",{query:r,success:s,failure:o},!0))}),PROCESS_ITEM:oe(n,(r,s,o)=>{const i=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",F.PROCESSING).length===i){n.processingQueue.push({id:r.id,success:s,failure:o});return}if(r.status===F.PROCESSING)return;const l=()=>{const u=n.processingQueue.shift();if(!u)return;const{id:f,success:h,failure:m}=u,d=we(n.items,f);if(!d||d.archived){l();return}e("PROCESS_ITEM",{query:f,success:h,failure:m},!0)};r.onOnce("process-complete",()=>{s(ne(r)),l();const u=n.options.server;if(n.options.instantUpload&&r.origin===j.LOCAL&&Ae(u.remove)){const m=()=>{};r.origin=j.LIMBO,n.options.server.remove(r.source,m,m)}t("GET_ITEMS_BY_STATUS",F.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",u=>{o({error:u,file:ne(r)}),l()});const c=n.options;r.process(Eo(uo(c.server.url,c.server.process,c.name,{chunkTransferId:r.transferId,chunkServer:c.server.patch,chunkUploads:c.chunkUploads,chunkForce:c.chunkForce,chunkSize:c.chunkSize,chunkRetryDelays:c.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(u,f,h)=>{de("PREPARE_OUTPUT",u,{query:t,item:r}).then(m=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:m}),f(m)}).catch(h)})}),RETRY_ITEM_PROCESSING:oe(n,r=>{e("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:oe(n,r=>{qn(t("GET_BEFORE_REMOVE_FILE"),ne(r)).then(s=>{s&&e("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:oe(n,r=>{r.release()}),REMOVE_ITEM:oe(n,(r,s,o,i)=>{const a=()=>{const c=r.id;Bn(n.items,c).archive(),e("DID_REMOVE_ITEM",{error:null,id:c,item:r}),xt(e,n),s(ne(r))},l=n.options.server;r.origin===j.LOCAL&&l&&Ae(l.remove)&&i.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:r.id}),l.remove(r.source,()=>a(),c=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:k("error",0,c,null),status:{main:st(n.options.labelFileRemoveError)(c),sub:n.options.labelTapToRetry}})})):((i.revert&&r.origin!==j.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert($e(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),a())}),ABORT_ITEM_LOAD:oe(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:oe(n,r=>{if(r.serverId){e("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:oe(n,r=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:r});return}const s=a=>{a&&e("REVERT_ITEM_PROCESSING",{query:r})},o=t("GET_BEFORE_REMOVE_FILE");if(!o)return s(!0);const i=o(ne(r));if(i==null)return s(!0);if(typeof i=="boolean")return s(i);typeof i.then=="function"&&i.then(s)}),REVERT_ITEM_PROCESSING:oe(n,r=>{r.revert($e(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||_o(r))&&e("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const s=Object.keys(r),o=To.filter(a=>s.includes(a));[...o,...Object.keys(r).filter(a=>!o.includes(a))].forEach(a=>{e(`SET_${St(a,"_").toUpperCase()}`,{value:r[a]})})}}),To=["server"],En=e=>e,Re=e=>document.createElement(e),$=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},Wn=(e,t,n,r)=>{const s=(r%360-90)*Math.PI/180;return{x:e+n*Math.cos(s),y:t+n*Math.sin(s)}},Ro=(e,t,n,r,s,o)=>{const i=Wn(e,t,n,s),a=Wn(e,t,n,r);return["M",i.x,i.y,"A",n,n,0,o,0,a.x,a.y].join(" ")},Oo=(e,t,n,r,s)=>{let o=1;return s>r&&s-r<=.5&&(o=0),r>s&&r-s>=.5&&(o=0),Ro(e,t,n,Math.min(.9999,r)*360,Math.min(.9999,s)*360,o)},yo=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=It("svg");e.ref.path=It("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},So=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(Y(e.ref.path,"stroke-width"),10),r=e.rect.element.width*.5;let s=0,o=0;t.spin?(s=0,o=.5):(s=0,o=t.progress);const i=Oo(r,r,r-n,s,o);Y(e.ref.path,"d",i),Y(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},kn=z({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:yo,write:So,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Do=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},Ao=({root:e,props:t})=>{const{isDisabled:n}=t,r=e.query("GET_DISABLED")||t.opacity===0;r&&!n?(t.isDisabled=!0,Y(e.element,"disabled","disabled")):!r&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},Qr=z({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:Do,write:Ao}),Kr=(e,t=".",n=1e3,r={})=>{const{labelBytes:s="bytes",labelKilobytes:o="KB",labelMegabytes:i="MB",labelGigabytes:a="GB"}=r;e=Math.round(Math.abs(e));const l=n,c=n*n,u=n*n*n;return e<l?`${e} ${s}`:e<c?`${Math.floor(e/l)} ${o}`:e<u?`${$n(e/c,1,t)} ${i}`:`${$n(e/u,2,t)} ${a}`},$n=(e,t,n)=>e.toFixed(t).split(".").filter(r=>r!=="0").join(n),wo=({root:e,props:t})=>{const n=Re("span");n.className="filepond--file-info-main",Y(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const r=Re("span");r.className="filepond--file-info-sub",e.appendChild(r),e.ref.fileSize=r,$(r,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),$(n,En(e.query("GET_ITEM_NAME",t.id)))},Qt=({root:e,props:t})=>{$(e.ref.fileSize,Kr(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),$(e.ref.fileName,En(e.query("GET_ITEM_NAME",t.id)))},Yn=({root:e,props:t})=>{if(qe(e.query("GET_ITEM_SIZE",t.id))){Qt({root:e,props:t});return}$(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},Po=z({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:ee({DID_LOAD_ITEM:Qt,DID_UPDATE_ITEM_META:Qt,DID_THROW_ITEM_LOAD_ERROR:Yn,DID_THROW_ITEM_INVALID:Yn}),didCreateView:e=>{Le("CREATE_VIEW",{...e,view:e})},create:wo,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Zr=e=>Math.round(e*100),bo=({root:e})=>{const t=Re("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=Re("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,Jr({root:e,action:{progress:null}})},Jr=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${Zr(t.progress)}%`;$(e.ref.main,n),$(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Mo=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${Zr(t.progress)}%`;$(e.ref.main,n),$(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Lo=({root:e})=>{$(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),$(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Co=({root:e})=>{$(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),$(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},No=({root:e})=>{$(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),$(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},zn=({root:e})=>{$(e.ref.main,""),$(e.ref.sub,"")},Ye=({root:e,action:t})=>{$(e.ref.main,t.status.main),$(e.ref.sub,t.status.sub)},vo=z({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:ee({DID_LOAD_ITEM:zn,DID_REVERT_ITEM_PROCESSING:zn,DID_REQUEST_ITEM_PROCESSING:Lo,DID_ABORT_ITEM_PROCESSING:Co,DID_COMPLETE_ITEM_PROCESSING:No,DID_UPDATE_ITEM_PROCESS_PROGRESS:Mo,DID_UPDATE_ITEM_LOAD_PROGRESS:Jr,DID_THROW_ITEM_LOAD_ERROR:Ye,DID_THROW_ITEM_INVALID:Ye,DID_THROW_ITEM_PROCESSING_ERROR:Ye,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Ye,DID_THROW_ITEM_REMOVE_ERROR:Ye}),didCreateView:e=>{Le("CREATE_VIEW",{...e,view:e})},create:bo,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Kt={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Zt=[];W(Kt,e=>{Zt.push(e)});const se=e=>{if(Jt(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Go=e=>e.ref.buttonAbortItemLoad.rect.element.width,it=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),Fo=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),xo=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),Uo=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),Jt=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Bo={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:xo},processProgressIndicator:{opacity:0,align:Uo},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Xn={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:se},status:{translateX:se}},Bt={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Fe={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:se},status:{translateX:se,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:se},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Jt},info:{translateX:se},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Jt},buttonRemoveItem:{opacity:1},info:{translateX:se},status:{opacity:1,translateX:se}},DID_LOAD_ITEM:Xn,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:se},status:{translateX:se}},DID_START_ITEM_PROCESSING:Bt,DID_REQUEST_ITEM_PROCESSING:Bt,DID_UPDATE_ITEM_PROCESS_PROGRESS:Bt,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:se}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:se},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Xn},Vo=z({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Ho=({root:e,props:t})=>{const n=Object.keys(Kt).reduce((d,p)=>(d[p]={...Kt[p]},d),{}),{id:r}=t,s=e.query("GET_ALLOW_REVERT"),o=e.query("GET_ALLOW_REMOVE"),i=e.query("GET_ALLOW_PROCESS"),a=e.query("GET_INSTANT_UPLOAD"),l=e.query("IS_ASYNC"),c=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let u;l?i&&!s?u=d=>!/RevertItemProcessing/.test(d):!i&&s?u=d=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(d):!i&&!s&&(u=d=>!/Process/.test(d)):u=d=>!/Process/.test(d);const f=u?Zt.filter(u):Zt.concat();if(a&&s&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),l&&!s){const d=Fe.DID_COMPLETE_ITEM_PROCESSING;d.info.translateX=Fo,d.info.translateY=it,d.status.translateY=it,d.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(l&&!i&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(d=>{Fe[d].status.translateY=it}),Fe.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Go),c&&s){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const d=Fe.DID_COMPLETE_ITEM_PROCESSING;d.info.translateX=se,d.status.translateY=it,d.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}o||(n.RemoveItem.disabled=!0),W(n,(d,p)=>{const _=e.createChildView(Qr,{label:e.query(p.label),icon:e.query(p.icon),opacity:0});f.includes(d)&&e.appendChildView(_),p.disabled&&(_.element.setAttribute("disabled","disabled"),_.element.setAttribute("hidden","hidden")),_.element.dataset.align=e.query(`GET_STYLE_${p.align}`),_.element.classList.add(p.className),_.on("click",T=>{T.stopPropagation(),!p.disabled&&e.dispatch(p.action,{query:r})}),e.ref[`button${d}`]=_}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(Vo)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(Po,{id:r})),e.ref.status=e.appendChildView(e.createChildView(vo,{id:r}));const h=e.appendChildView(e.createChildView(kn,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));h.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=h;const m=e.appendChildView(e.createChildView(kn,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));m.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=m,e.ref.activeStyles=[]},qo=({root:e,actions:t,props:n})=>{Wo({root:e,actions:t,props:n});let r=t.concat().filter(s=>/^DID_/.test(s.type)).reverse().find(s=>Fe[s.type]);if(r){e.ref.activeStyles=[];const s=Fe[r.type];W(Bo,(o,i)=>{const a=e.ref[o];W(i,(l,c)=>{const u=s[o]&&typeof s[o][l]<"u"?s[o][l]:c;e.ref.activeStyles.push({control:a,key:l,value:u})})})}e.ref.activeStyles.forEach(({control:s,key:o,value:i})=>{s[o]=typeof i=="function"?i(e):i})},Wo=ee({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),ko=z({create:Ho,write:qo,didCreateView:e=>{Le("CREATE_VIEW",{...e,view:e})},name:"file"}),$o=({root:e,props:t})=>{e.ref.fileName=Re("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(ko,{id:t.id})),e.ref.data=!1},Yo=({root:e,props:t})=>{$(e.ref.fileName,En(e.query("GET_ITEM_NAME",t.id)))},zo=z({create:$o,ignoreRect:!0,write:ee({DID_LOAD_ITEM:Yo}),didCreateView:e=>{Le("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),jn={type:"spring",damping:.6,mass:7},Xo=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:jn},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:jn},styles:["translateY"]}}].forEach(n=>{jo(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},jo=(e,t,n)=>{const r=z({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),s=e.createChildView(r,t.props);e.ref[t.name]=e.appendChildView(s)},Qo=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=Gr(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,r=e.ref.bottom.rect.element,s=Math.max(n.height+r.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(s-n.height-r.height)/100,e.ref.bottom.translateY=s-r.height},es=z({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:Qo,create:Xo,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),Ko=e=>{const t=e.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>t.indexOf(r.id)}},Qn={type:"spring",stiffness:.75,damping:.45,mass:10},Kn="spring",Zn={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},Zo=({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(zo,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(es,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let s=!1;const o={x:r.pageX,y:r.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const i=Ko(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:i});const a=c=>{if(!c.isPrimary)return;c.stopPropagation(),c.preventDefault(),t.dragOffset={x:c.pageX-o.x,y:c.pageY-o.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!s&&(s=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:i})},l=c=>{c.isPrimary&&(document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),t.dragOffset={x:c.pageX-o.x,y:c.pageY-o.y},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:i}),s&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0))};document.addEventListener("pointermove",a),document.addEventListener("pointerup",l)};e.element.addEventListener("pointerdown",n)},Jo=ee({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),ea=ee({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:r})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let s=t.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>Zn[i.type]);s&&s.type!==n.currentState&&(n.currentState=s.type,e.element.dataset.filepondItemState=Zn[n.currentState]||"");const o=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");o?r||(e.height=e.rect.element.width*o):(Jo({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),r&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),ta=z({create:Zo,write:ea,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Kn,scaleY:Kn,translateX:Qn,translateY:Qn,opacity:{type:"tween",duration:150}}}});var pn=(e,t)=>Math.max(1,Math.floor((e+1)/t));const hn=(e,t,n)=>{if(!n)return;const r=e.rect.element.width,s=t.length;let o=null;if(s===0||n.top<t[0].rect.element.top)return-1;const a=t[0].rect.element,l=a.marginLeft+a.marginRight,c=a.width+l,u=pn(r,c);if(u===1){for(let m=0;m<s;m++){const d=t[m],p=d.rect.outer.top+d.rect.element.height*.5;if(n.top<p)return m}return s}const f=a.marginTop+a.marginBottom,h=a.height+f;for(let m=0;m<s;m++){const d=m%u,p=Math.floor(m/u),_=d*c,T=p*h,E=T-a.marginTop,I=_+c,y=T+h+a.marginBottom;if(n.top<y&&n.top>E){if(n.left<I)return m;m!==s-1?o=m:o=null}}return o!==null?o:s},ot={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},na=({root:e})=>{Y(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},ra=({root:e,action:t})=>{const{id:n,index:r,interactionMethod:s}=t;e.ref.addIndex=r;const o=Date.now();let i=o,a=1;if(s!==le.NONE){a=0;const l=e.query("GET_ITEM_INSERT_INTERVAL"),c=o-e.ref.lastItemSpanwDate;i=c<l?o+(l-c):o}e.ref.lastItemSpanwDate=i,e.appendChildView(e.createChildView(ta,{spawnDate:i,id:n,opacity:a,interactionMethod:s}),r)},Jn=(e,t,n,r=0,s=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&sa(e,t,n,r,s),e.scaleX=1,e.scaleY=1,e.opacity=1))},sa=(e,t,n,r,s)=>{e.interactionMethod===le.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===le.DROP?(e.translateX=null,e.translateX=t-r*20,e.translateY=null,e.translateY=n-s*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===le.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===le.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},ia=({root:e,action:t})=>{const{id:n}=t,r=e.childViews.find(s=>s.id===n);r&&(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},Vt=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,oa=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,aa=({root:e,action:t})=>{const{id:n,dragState:r}=t,s=e.query("GET_ITEM",{id:n}),o=e.childViews.find(_=>_.id===n),i=e.childViews.length,a=r.getItemIndex(s);if(!o)return;const l={x:o.dragOrigin.x+o.dragOffset.x+o.dragCenter.x,y:o.dragOrigin.y+o.dragOffset.y+o.dragCenter.y},c=Vt(o),u=oa(o);let f=Math.floor(e.rect.outer.width/u);f>i&&(f=i);const h=Math.floor(i/f+1);ot.setHeight=c*h,ot.setWidth=u*f;var m={y:Math.floor(l.y/c),x:Math.floor(l.x/u),getGridIndex:function(){return l.y>ot.getHeight||l.y<0||l.x>ot.getWidth||l.x<0?a:this.y*f+this.x},getColIndex:function(){const T=e.query("GET_ACTIVE_ITEMS"),E=e.childViews.filter(M=>M.rect.element.height),I=T.map(M=>E.find(L=>L.id===M.id)),y=I.findIndex(M=>M===o),S=Vt(o),b=I.length;let v=b,D=0,P=0,G=0;for(let M=0;M<b;M++)if(D=Vt(I[M]),G=P,P=G+D,l.y<P){if(y>M){if(l.y<G+S){v=M;break}continue}v=M;break}return v}};const d=f>1?m.getGridIndex():m.getColIndex();e.dispatch("MOVE_ITEM",{query:o,index:d});const p=r.getIndex();if(p===void 0||p!==d){if(r.setIndex(d),p===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:a,target:d})}},la=ee({DID_ADD_ITEM:ra,DID_REMOVE_ITEM:ia,DID_DRAG_ITEM:aa}),ca=({root:e,props:t,actions:n,shouldOptimize:r})=>{la({root:e,props:t,actions:n});const{dragCoordinates:s}=t,o=e.rect.element.width,i=e.childViews.filter(I=>I.rect.element.height),a=e.query("GET_ACTIVE_ITEMS").map(I=>i.find(y=>y.id===I.id)).filter(I=>I),l=s?hn(e,a,s):null,c=e.ref.addIndex||null;e.ref.addIndex=null;let u=0,f=0,h=0;if(a.length===0)return;const m=a[0].rect.element,d=m.marginTop+m.marginBottom,p=m.marginLeft+m.marginRight,_=m.width+p,T=m.height+d,E=pn(o,_);if(E===1){let I=0,y=0;a.forEach((S,b)=>{if(l){let P=b-l;P===-2?y=-d*.25:P===-1?y=-d*.75:P===0?y=d*.75:P===1?y=d*.25:y=0}r&&(S.translateX=null,S.translateY=null),S.markedForRemoval||Jn(S,0,I+y);let D=(S.rect.element.height+d)*(S.markedForRemoval?S.opacity:1);I+=D})}else{let I=0,y=0;a.forEach((S,b)=>{b===l&&(u=1),b===c&&(h+=1),S.markedForRemoval&&S.opacity<.5&&(f-=1);const v=b+h+u+f,D=v%E,P=Math.floor(v/E),G=D*_,M=P*T,L=Math.sign(G-I),H=Math.sign(M-y);I=G,y=M,!S.markedForRemoval&&(r&&(S.translateX=null,S.translateY=null),Jn(S,G,M,L,H))})}},ua=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),da=z({create:na,write:ca,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:ua,mixins:{apis:["dragCoordinates"]}}),fa=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(da)),t.dragCoordinates=null,t.overflowing=!1},Ea=({root:e,props:t,action:n})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},pa=({props:e})=>{e.dragCoordinates=null},ha=ee({DID_DRAG:Ea,DID_END_DRAG:pa}),ma=({root:e,props:t,actions:n})=>{if(ha({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},Ia=z({create:fa,write:ma,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Ee=(e,t,n,r="")=>{n?Y(e,t,r):e.removeAttribute(t)},_a=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=Re("form"),n=e.parentNode,r=e.nextSibling;t.appendChild(e),t.reset(),r?n.insertBefore(e,r):n.appendChild(e)}}},ga=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,Y(e.element,"name",e.query("GET_NAME")),Y(e.element,"aria-controls",`filepond--assistant-${t.id}`),Y(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),ts({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),ns({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),rs({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),en({root:e}),ss({root:e,action:{value:e.query("GET_REQUIRED")}}),is({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const r=Array.from(e.element.files).map(s=>(s._relativePath=s.webkitRelativePath,s));setTimeout(()=>{t.onload(r),_a(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},ts=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Ee(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},ns=({root:e,action:t})=>{Ee(e.element,"multiple",t.value)},rs=({root:e,action:t})=>{Ee(e.element,"webkitdirectory",t.value)},en=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),r=t||!n;Ee(e.element,"disabled",r)},ss=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&Ee(e.element,"required",!0):Ee(e.element,"required",!1)},is=({root:e,action:t})=>{Ee(e.element,"capture",!!t.value,t.value===!0?"":t.value)},er=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(Ee(t,"required",!1),Ee(t,"name",!1)):(Ee(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&Ee(t,"required",!0))},Ta=({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},Ra=z({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:ga,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:ee({DID_LOAD_ITEM:er,DID_REMOVE_ITEM:er,DID_THROW_ITEM_INVALID:Ta,DID_SET_DISABLED:en,DID_SET_ALLOW_BROWSE:en,DID_SET_ALLOW_DIRECTORIES_ONLY:rs,DID_SET_ALLOW_MULTIPLE:ns,DID_SET_ACCEPTED_FILE_TYPES:ts,DID_SET_CAPTURE_METHOD:is,DID_SET_REQUIRED:ss})}),tr={ENTER:13,SPACE:32},Oa=({root:e,props:t})=>{const n=Re("label");Y(n,"for",`filepond--browser-${t.id}`),Y(n,"id",`filepond--drop-label-${t.id}`),Y(n,"aria-hidden","true"),e.ref.handleKeyDown=r=>{(r.keyCode===tr.ENTER||r.keyCode===tr.SPACE)&&(r.preventDefault(),e.ref.label.click())},e.ref.handleClick=r=>{r.target===n||n.contains(r.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),os(n,t.caption),e.appendChild(n),e.ref.label=n},os=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&Y(n,"tabindex","0"),t},ya=z({name:"drop-label",ignoreRect:!0,create:Oa,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:ee({DID_SET_LABEL_IDLE:({root:e,action:t})=>{os(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Sa=z({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Da=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(Sa,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},Aa=({root:e,action:t})=>{if(!e.ref.blob){Da({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},wa=({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)},Pa=({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},ba=({root:e,props:t,actions:n})=>{Ma({root:e,props:t,actions:n});const{blob:r}=e.ref;n.length===0&&r&&r.opacity===0&&(e.removeChildView(r),e.ref.blob=null)},Ma=ee({DID_DRAG:Aa,DID_DROP:Pa,DID_END_DRAG:wa}),La=z({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:ba}),as=(e,t)=>{try{const n=new DataTransfer;t.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),e.files=n.files}catch{return!1}return!0},Ca=({root:e})=>e.ref.fields={},wt=(e,t)=>e.ref.fields[t],mn=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},nr=({root:e})=>mn(e),Na=({root:e,action:t})=>{const s=!(e.query("GET_ITEM",t.id).origin===j.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),o=Re("input");o.type=s?"file":"hidden",o.name=e.query("GET_NAME"),o.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=o,mn(e)},va=({root:e,action:t})=>{const n=wt(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=e.query("GET_ITEM",t.id);as(n,[r.file])},Ga=({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=wt(e,t.id);n&&as(n,[t.file])},0)},Fa=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},xa=({root:e,action:t})=>{const n=wt(e,t.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},Ua=({root:e,action:t})=>{const n=wt(e,t.id);n&&(t.value===null?n.removeAttribute("value"):n.value=t.value,mn(e))},Ba=ee({DID_SET_DISABLED:Fa,DID_ADD_ITEM:Na,DID_LOAD_ITEM:va,DID_REMOVE_ITEM:xa,DID_DEFINE_VALUE:Ua,DID_PREPARE_OUTPUT:Ga,DID_REORDER_ITEMS:nr,DID_SORT_ITEMS:nr}),Va=z({tag:"fieldset",name:"data",create:Ca,write:Ba,ignoreRect:!0}),Ha=e=>"getRootNode"in e?e.getRootNode():document,qa=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Wa=["css","csv","html","txt"],ka={zip:"zip|compressed",epub:"application/epub+zip"},ls=(e="")=>(e=e.toLowerCase(),qa.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):Wa.includes(e)?"text/"+e:ka[e]||""),In=e=>new Promise((t,n)=>{const r=Za(e);if(r.length&&!$a(e))return t(r);Ya(e).then(t)}),$a=e=>e.files?e.files.length>0:!1,Ya=e=>new Promise((t,n)=>{const r=(e.items?Array.from(e.items):[]).filter(s=>za(s)).map(s=>Xa(s));if(!r.length){t(e.files?Array.from(e.files):[]);return}Promise.all(r).then(s=>{const o=[];s.forEach(i=>{o.push.apply(o,i)}),t(o.filter(i=>i).map(i=>(i._relativePath||(i._relativePath=i.webkitRelativePath),i)))}).catch(console.error)}),za=e=>{if(cs(e)){const t=_n(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},Xa=e=>new Promise((t,n)=>{if(Ka(e)){ja(_n(e)).then(t).catch(n);return}t([e.getAsFile()])}),ja=e=>new Promise((t,n)=>{const r=[];let s=0,o=0;const i=()=>{o===0&&s===0&&t(r)},a=l=>{s++;const c=l.createReader(),u=()=>{c.readEntries(f=>{if(f.length===0){s--,i();return}f.forEach(h=>{h.isDirectory?a(h):(o++,h.file(m=>{const d=Qa(m);h.fullPath&&(d._relativePath=h.fullPath),r.push(d),o--,i()}))}),u()},n)};u()};a(e)}),Qa=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,r=ls(At(e.name));return r.length&&(e=e.slice(0,e.size,r),e.name=n,e.lastModifiedDate=t),e},Ka=e=>cs(e)&&(_n(e)||{}).isDirectory,cs=e=>"webkitGetAsEntry"in e,_n=e=>e.webkitGetAsEntry(),Za=e=>{let t=[];try{if(t=el(e),t.length)return t;t=Ja(e)}catch{}return t},Ja=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},el=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},gt=[],Me=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),tl=(e,t,n)=>{const r=nl(t),s={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return s.destroy=r.addListener(s),s},nl=e=>{const t=gt.find(r=>r.element===e);if(t)return t;const n=rl(e);return gt.push(n),n},rl=e=>{const t=[],n={dragenter:il,dragover:ol,dragleave:ll,drop:al},r={};W(n,(o,i)=>{r[o]=i(e,t),e.addEventListener(o,r[o],!1)});const s={element:e,addListener:o=>(t.push(o),()=>{t.splice(t.indexOf(o),1),t.length===0&&(gt.splice(gt.indexOf(s),1),W(n,i=>{e.removeEventListener(i,r[i],!1)}))})};return s},sl=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),gn=(e,t)=>{const n=Ha(t),r=sl(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return r===t||t.contains(r)};let us=null;const at=(e,t)=>{try{e.dropEffect=t}catch{}},il=(e,t)=>n=>{n.preventDefault(),us=n.target,t.forEach(r=>{const{element:s,onenter:o}=r;gn(n,s)&&(r.state="enter",o(Me(n)))})},ol=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;In(r).then(s=>{let o=!1;t.some(i=>{const{filterElement:a,element:l,onenter:c,onexit:u,ondrag:f,allowdrop:h}=i;at(r,"copy");const m=h(s);if(!m){at(r,"none");return}if(gn(n,l)){if(o=!0,i.state===null){i.state="enter",c(Me(n));return}if(i.state="over",a&&!m){at(r,"none");return}f(Me(n))}else a&&!o&&at(r,"none"),i.state&&(i.state=null,u(Me(n)))})})},al=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;In(r).then(s=>{t.forEach(o=>{const{filterElement:i,element:a,ondrop:l,onexit:c,allowdrop:u}=o;if(o.state=null,!(i&&!gn(n,a))){if(!u(s))return c(Me(n));l(Me(n),s)}})})},ll=(e,t)=>n=>{us===n.target&&t.forEach(r=>{const{onexit:s}=r;r.state=null,s(Me(n))})},cl=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:s,filterItems:o=u=>u}=n,i=tl(e,r?document.documentElement:e,s);let a="",l="";i.allowdrop=u=>t(o(u)),i.ondrop=(u,f)=>{const h=o(f);if(!t(h)){c.ondragend(u);return}l="drag-drop",c.onload(h,u)},i.ondrag=u=>{c.ondrag(u)},i.onenter=u=>{l="drag-over",c.ondragstart(u)},i.onexit=u=>{l="drag-exit",c.ondragend(u)};const c={updateHopperState:()=>{a!==l&&(e.dataset.hopperState=l,a=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{i.destroy()}};return c};let tn=!1;const Ue=[],ds=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let n=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){n=!0;break}r=r.parentNode}if(!n)return}In(e.clipboardData).then(n=>{n.length&&Ue.forEach(r=>r(n))})},ul=e=>{Ue.includes(e)||(Ue.push(e),!tn&&(tn=!0,document.addEventListener("paste",ds)))},dl=e=>{un(Ue,Ue.indexOf(e)),Ue.length===0&&(document.removeEventListener("paste",ds),tn=!1)},fl=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{dl(e)},onload:()=>{}};return ul(e),t},El=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,Y(e.element,"role","status"),Y(e.element,"aria-live","polite"),Y(e.element,"aria-relevant","additions")};let rr=null,sr=null;const Ht=[],Pt=(e,t)=>{e.element.textContent=t},pl=e=>{e.element.textContent=""},fs=(e,t,n)=>{const r=e.query("GET_TOTAL_ITEMS");Pt(e,`${n} ${t}, ${r} ${r===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(sr),sr=setTimeout(()=>{pl(e)},1500)},Es=e=>e.element.parentNode.contains(document.activeElement),hl=({root:e,action:t})=>{if(!Es(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);Ht.push(n.filename),clearTimeout(rr),rr=setTimeout(()=>{fs(e,Ht.join(", "),e.query("GET_LABEL_FILE_ADDED")),Ht.length=0},750)},ml=({root:e,action:t})=>{if(!Es(e))return;const n=t.item;fs(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},Il=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,s=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Pt(e,`${r} ${s}`)},ir=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,s=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");Pt(e,`${r} ${s}`)},lt=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;Pt(e,`${t.status.main} ${r} ${t.status.sub}`)},_l=z({create:El,ignoreRect:!0,ignoreRectUpdate:!0,write:ee({DID_LOAD_ITEM:hl,DID_REMOVE_ITEM:ml,DID_COMPLETE_ITEM_PROCESSING:Il,DID_ABORT_ITEM_PROCESSING:ir,DID_REVERT_ITEM_PROCESSING:ir,DID_THROW_ITEM_REMOVE_ERROR:lt,DID_THROW_ITEM_LOAD_ERROR:lt,DID_THROW_ITEM_INVALID:lt,DID_THROW_ITEM_PROCESSING_ERROR:lt}),tag:"span",name:"assistant"}),ps=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),hs=(e,t=16,n=!0)=>{let r=Date.now(),s=null;return(...o)=>{clearTimeout(s);const i=Date.now()-r,a=()=>{r=Date.now(),e(...o)};i<t?n||(s=setTimeout(a,t-i)):a()}},gl=1e6,Tt=e=>e.preventDefault(),Tl=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const r=e.query("GET_CLASS_NAME");r&&r.split(" ").filter(l=>l.length).forEach(l=>{e.element.classList.add(l)}),e.ref.label=e.appendChildView(e.createChildView(ya,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(Ia,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(es,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(_l,{...t})),e.ref.data=e.appendChildView(e.createChildView(Va,{...t})),e.ref.measure=Re("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(l=>!Te(l.value)).map(({name:l,value:c})=>{e.element.dataset[l]=c}),e.ref.widthPrevious=null,e.ref.widthUpdated=hs(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const s=window.matchMedia("(pointer: fine) and (hover: hover)").matches,o="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&o&&!s&&(e.element.addEventListener("touchmove",Tt,{passive:!1}),e.element.addEventListener("gesturestart",Tt));const i=e.query("GET_CREDITS");if(i.length===2){const l=document.createElement("a");l.className="filepond--credits",l.setAttribute("aria-hidden","true"),l.href=i[0],l.tabindex=-1,l.target="_blank",l.rel="noopener noreferrer",l.textContent=i[1],e.element.appendChild(l),e.ref.credits=l}},Rl=({root:e,props:t,actions:n})=>{if(Al({root:e,props:t,actions:n}),n.filter(b=>/^DID_SET_STYLE_/.test(b.type)).filter(b=>!Te(b.data.value)).map(({type:b,data:v})=>{const D=ps(b.substring(8).toLowerCase(),"_");e.element.dataset[D]=v.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let r=e.ref.bounds;r||(r=e.ref.bounds=Sl(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:s,label:o,list:i,panel:a}=e.ref;s&&s.updateHopperState();const l=e.query("GET_PANEL_ASPECT_RATIO"),c=e.query("GET_ALLOW_MULTIPLE"),u=e.query("GET_TOTAL_ITEMS"),f=c?e.query("GET_MAX_FILES")||gl:1,h=u===f,m=n.find(b=>b.type==="DID_ADD_ITEM");if(h&&m){const b=m.data.interactionMethod;o.opacity=0,c?o.translateY=-40:b===le.API?o.translateX=40:b===le.BROWSE?o.translateY=40:o.translateY=30}else h||(o.opacity=1,o.translateX=0,o.translateY=0);const d=Ol(e),p=yl(e),_=o.rect.element.height,T=!c||h?0:_,E=h?i.rect.element.marginTop:0,I=u===0?0:i.rect.element.marginBottom,y=T+E+p.visual+I,S=T+E+p.bounds+I;if(i.translateY=Math.max(0,T-i.rect.element.marginTop)-d.top,l){const b=e.rect.element.width,v=b*l;l!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=l,e.ref.updateHistory=[]);const D=e.ref.updateHistory;D.push(b);const P=2;if(D.length>P*2){const M=D.length,L=M-10;let H=0;for(let w=M;w>=L;w--)if(D[w]===D[w-2]&&H++,H>=P)return}a.scalable=!1,a.height=v;const G=v-T-(I-d.bottom)-(h?E:0);p.visual>G?i.overflow=G:i.overflow=null,e.height=v}else if(r.fixedHeight){a.scalable=!1;const b=r.fixedHeight-T-(I-d.bottom)-(h?E:0);p.visual>b?i.overflow=b:i.overflow=null}else if(r.cappedHeight){const b=y>=r.cappedHeight,v=Math.min(r.cappedHeight,y);a.scalable=!0,a.height=b?v:v-d.top-d.bottom;const D=v-T-(I-d.bottom)-(h?E:0);y>r.cappedHeight&&p.visual>D?i.overflow=D:i.overflow=null,e.height=Math.min(r.cappedHeight,S-d.top-d.bottom)}else{const b=u>0?d.top+d.bottom:0;a.scalable=!0,a.height=Math.max(_,y-b),e.height=Math.max(_,S-b)}e.ref.credits&&a.heightCurrent&&(e.ref.credits.style.transform=`translateY(${a.heightCurrent}px)`)},Ol=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},yl=e=>{let t=0,n=0;const r=e.ref.list,s=r.childViews[0],o=s.childViews.filter(E=>E.rect.element.height),i=e.query("GET_ACTIVE_ITEMS").map(E=>o.find(I=>I.id===E.id)).filter(E=>E);if(i.length===0)return{visual:t,bounds:n};const a=s.rect.element.width,l=hn(s,i,r.dragCoordinates),c=i[0].rect.element,u=c.marginTop+c.marginBottom,f=c.marginLeft+c.marginRight,h=c.width+f,m=c.height+u,d=typeof l<"u"&&l>=0?1:0,p=i.find(E=>E.markedForRemoval&&E.opacity<.45)?-1:0,_=i.length+d+p,T=pn(a,h);return T===1?i.forEach(E=>{const I=E.rect.element.height+u;n+=I,t+=I*E.opacity}):(n=Math.ceil(_/T)*m,t=n),{visual:t,bounds:n}},Sl=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},Tn=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),r=e.query("GET_ALLOW_MULTIPLE"),s=e.query("GET_TOTAL_ITEMS");let o=e.query("GET_MAX_FILES");const i=t.length;return!r&&i>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:k("warning",0,"Max files")}),!0):(o=r?o:1,!r&&n?!1:qe(o)&&s+i>o?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:k("warning",0,"Max files")}),!0):!1)},Dl=(e,t,n)=>{const r=e.childViews[0];return hn(r,t,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},or=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),r=t&&!n;if(r&&!e.ref.hopper){const s=cl(e.element,o=>{const i=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?o.every(l=>Le("ALLOW_HOPPER_ITEM",l,{query:e.query}).every(c=>c===!0)&&i(l)):!0},{filterItems:o=>{const i=e.query("GET_IGNORED_FILES");return o.filter(a=>Ve(a)?!i.includes(a.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});s.onload=(o,i)=>{const l=e.ref.list.childViews[0].childViews.filter(u=>u.rect.element.height),c=e.query("GET_ACTIVE_ITEMS").map(u=>l.find(f=>f.id===u.id)).filter(u=>u);de("ADD_ITEMS",o,{dispatch:e.dispatch}).then(u=>{if(Tn(e,u))return!1;e.dispatch("ADD_ITEMS",{items:u,index:Dl(e.ref.list,c,i),interactionMethod:le.DROP})}),e.dispatch("DID_DROP",{position:i}),e.dispatch("DID_END_DRAG",{position:i})},s.ondragstart=o=>{e.dispatch("DID_START_DRAG",{position:o})},s.ondrag=hs(o=>{e.dispatch("DID_DRAG",{position:o})}),s.ondragend=o=>{e.dispatch("DID_END_DRAG",{position:o})},e.ref.hopper=s,e.ref.drip=e.appendChildView(e.createChildView(La))}else!r&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},ar=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),r=e.query("GET_DISABLED"),s=n&&!r;s&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Ra,{...t,onload:o=>{de("ADD_ITEMS",o,{dispatch:e.dispatch}).then(i=>{if(Tn(e,i))return!1;e.dispatch("ADD_ITEMS",{items:i,index:-1,interactionMethod:le.BROWSE})})}}),0):!s&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},lr=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),r=t&&!n;r&&!e.ref.paster?(e.ref.paster=fl(),e.ref.paster.onload=s=>{de("ADD_ITEMS",s,{dispatch:e.dispatch}).then(o=>{if(Tn(e,o))return!1;e.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:le.PASTE})})}):!r&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},Al=ee({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{ar(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{or(e)},DID_SET_ALLOW_PASTE:({root:e})=>{lr(e)},DID_SET_DISABLED:({root:e,props:t})=>{or(e),lr(e),ar(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),wl=z({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:Tl,write:Rl,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",Tt),e.element.removeEventListener("gesturestart",Tt)},mixins:{styles:["height"]}}),Pl=(e={})=>{let t=null;const n=_t(),r=Ws(Pi(n),[zi,Li(n)],[go,Mi(n)]);r.dispatch("SET_OPTIONS",{options:e});const s=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",s);let o=null,i=!1,a=!1,l=null,c=null;const u=()=>{i||(i=!0),clearTimeout(o),o=setTimeout(()=>{i=!1,l=null,c=null,a&&(a=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",u);const f=wl(r,{id:cn()});let h=!1,m=!1;const d={_read:()=>{i&&(c=window.innerWidth,l||(l=c),!a&&c!==l&&(r.dispatch("DID_START_RESIZE"),a=!0)),m&&h&&(h=f.element.offsetParent===null),!h&&(f._read(),m=f.rect.element.hidden)},_write:O=>{const A=r.processActionQueue().filter(C=>!/^SET_/.test(C.type));h&&!A.length||(E(A),h=f._write(O,A,a),vi(r.query("GET_ITEMS")),h&&r.processDispatchQueue())}},p=O=>A=>{const C={type:O};if(!A)return C;if(A.hasOwnProperty("error")&&(C.error=A.error?{...A.error}:null),A.status&&(C.status={...A.status}),A.file&&(C.output=A.file),A.source)C.file=A.source;else if(A.item||A.id){const N=A.item?A.item:r.query("GET_ITEM",A.id);C.file=N?ne(N):null}return A.items&&(C.items=A.items.map(ne)),/progress/.test(O)&&(C.progress=A.progress),A.hasOwnProperty("origin")&&A.hasOwnProperty("target")&&(C.origin=A.origin,C.target=A.target),C},_={DID_DESTROY:p("destroy"),DID_INIT:p("init"),DID_THROW_MAX_FILES:p("warning"),DID_INIT_ITEM:p("initfile"),DID_START_ITEM_LOAD:p("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:p("addfileprogress"),DID_LOAD_ITEM:p("addfile"),DID_THROW_ITEM_INVALID:[p("error"),p("addfile")],DID_THROW_ITEM_LOAD_ERROR:[p("error"),p("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[p("error"),p("removefile")],DID_PREPARE_OUTPUT:p("preparefile"),DID_START_ITEM_PROCESSING:p("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:p("processfileprogress"),DID_ABORT_ITEM_PROCESSING:p("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:p("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:p("processfiles"),DID_REVERT_ITEM_PROCESSING:p("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[p("error"),p("processfile")],DID_REMOVE_ITEM:p("removefile"),DID_UPDATE_ITEMS:p("updatefiles"),DID_ACTIVATE_ITEM:p("activatefile"),DID_REORDER_ITEMS:p("reorderfiles")},T=O=>{const A={pond:x,...O};delete A.type,f.element.dispatchEvent(new CustomEvent(`FilePond:${O.type}`,{detail:A,bubbles:!0,cancelable:!0,composed:!0}));const C=[];O.hasOwnProperty("error")&&C.push(O.error),O.hasOwnProperty("file")&&C.push(O.file);const N=["type","error","file"];Object.keys(O).filter(q=>!N.includes(q)).forEach(q=>C.push(O[q])),x.fire(O.type,...C);const U=r.query(`GET_ON${O.type.toUpperCase()}`);U&&U(...C)},E=O=>{O.length&&O.filter(A=>_[A.type]).forEach(A=>{const C=_[A.type];(Array.isArray(C)?C:[C]).forEach(N=>{A.type==="DID_INIT_ITEM"?T(N(A.data)):setTimeout(()=>{T(N(A.data))},0)})})},I=O=>r.dispatch("SET_OPTIONS",{options:O}),y=O=>r.query("GET_ACTIVE_ITEM",O),S=O=>new Promise((A,C)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:O,success:N=>{A(N)},failure:N=>{C(N)}})}),b=(O,A={})=>new Promise((C,N)=>{P([{source:O,options:A}],{index:A.index}).then(U=>C(U&&U[0])).catch(N)}),v=O=>O.file&&O.id,D=(O,A)=>(typeof O=="object"&&!v(O)&&!A&&(A=O,O=void 0),r.dispatch("REMOVE_ITEM",{...A,query:O}),r.query("GET_ACTIVE_ITEM",O)===null),P=(...O)=>new Promise((A,C)=>{const N=[],U={};if(Ot(O[0]))N.push.apply(N,O[0]),Object.assign(U,O[1]||{});else{const q=O[O.length-1];typeof q=="object"&&!(q instanceof Blob)&&Object.assign(U,O.pop()),N.push(...O)}r.dispatch("ADD_ITEMS",{items:N,index:U.index,interactionMethod:le.API,success:A,failure:C})}),G=()=>r.query("GET_ACTIVE_ITEMS"),M=O=>new Promise((A,C)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:O,success:N=>{A(N)},failure:N=>{C(N)}})}),L=(...O)=>{const A=Array.isArray(O[0])?O[0]:O,C=A.length?A:G();return Promise.all(C.map(S))},H=(...O)=>{const A=Array.isArray(O[0])?O[0]:O;if(!A.length){const C=G().filter(N=>!(N.status===F.IDLE&&N.origin===j.LOCAL)&&N.status!==F.PROCESSING&&N.status!==F.PROCESSING_COMPLETE&&N.status!==F.PROCESSING_REVERT_ERROR);return Promise.all(C.map(M))}return Promise.all(A.map(M))},w=(...O)=>{const A=Array.isArray(O[0])?O[0]:O;let C;typeof A[A.length-1]=="object"?C=A.pop():Array.isArray(O[0])&&(C=O[1]);const N=G();return A.length?A.map(q=>De(q)?N[q]?N[q].id:null:q).filter(q=>q).map(q=>D(q,C)):Promise.all(N.map(q=>D(q,C)))},x={...Dt(),...d,...bi(r,n),setOptions:I,addFile:b,addFiles:P,getFile:y,processFile:M,prepareFile:S,removeFile:D,moveFile:(O,A)=>r.dispatch("MOVE_ITEM",{query:O,index:A}),getFiles:G,processFiles:H,removeFiles:w,prepareFiles:L,sort:O=>r.dispatch("SORT",{compare:O}),browse:()=>{var O=f.element.querySelector("input[type=file]");O&&O.click()},destroy:()=>{x.fire("destroy",f.element),r.dispatch("ABORT_ALL"),f._destroy(),window.removeEventListener("resize",u),document.removeEventListener("visibilitychange",s),r.dispatch("DID_DESTROY")},insertBefore:O=>Ln(f.element,O),insertAfter:O=>Cn(f.element,O),appendTo:O=>O.appendChild(f.element),replaceElement:O=>{Ln(f.element,O),O.parentNode.removeChild(O),t=O},restoreElement:()=>{t&&(Cn(t,f.element),f.element.parentNode.removeChild(f.element),t=null)},isAttachedTo:O=>f.element===O||t===O,element:{get:()=>f.element},status:{get:()=>r.query("GET_STATUS")}};return r.dispatch("DID_INIT"),Se(x)},ms=(e={})=>{const t={};return W(_t(),(r,s)=>{t[r]=s[0]}),Pl({...t,...e})},bl=e=>e.charAt(0).toLowerCase()+e.slice(1),Ml=e=>ps(e.replace(/^data-/,"")),Is=(e,t)=>{W(t,(n,r)=>{W(e,(s,o)=>{const i=new RegExp(n);if(!i.test(s)||(delete e[s],r===!1))return;if(J(r)){e[r]=o;return}const l=r.group;Q(r)&&!e[l]&&(e[l]={}),e[l][bl(s.replace(i,""))]=o}),r.mapping&&Is(e[r.group],r.mapping)})},Ll=(e,t={})=>{const n=[];W(e.attributes,s=>{n.push(e.attributes[s])});const r=n.filter(s=>s.name).reduce((s,o)=>{const i=Y(e,o.name);return s[Ml(o.name)]=i===o.name?!0:i,s},{});return Is(r,t),r},Cl=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Le("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r={...t},s=Ll(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(s).forEach(i=>{Q(s[i])?(Q(r[i])||(r[i]={}),Object.assign(r[i],s[i])):r[i]=s[i]}),r.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(i=>({source:i.value,options:{type:i.dataset.type}})));const o=ms(r);return e.files&&Array.from(e.files).forEach(i=>{o.addFile(i)}),o.replaceElement(e),o},Nl=(...e)=>qs(e[0])?Cl(...e):ms(...e),vl=["fire","_read","_write"],cr=e=>{const t={};return Br(e,t,vl),t},Gl=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>t[r]),Fl=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return{transfer:(s,o)=>{},post:(s,o,i)=>{const a=cn();r.onmessage=l=>{l.data.id===a&&o(l.data.message)},r.postMessage({id:a,message:s},i)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},xl=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=s=>{n(s)},r.src=e}),_s=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},Ul=e=>_s(e,e.name),ur=[],Bl=e=>{if(ur.includes(e))return;ur.push(e);const t=e({addFilter:Fi,utils:{Type:R,forin:W,isString:J,isFile:Ve,toNaturalFileSize:Kr,replaceInString:Gl,getExtensionFromFilename:At,getFilenameWithoutExtension:Xr,guesstimateMimeType:ls,getFileFromBlob:Be,getFilenameFromURL:Ze,createRoute:ee,createWorker:Fl,createView:z,createItemAPI:ne,loadImage:xl,copyFile:Ul,renameFile:_s,createBlob:$r,applyFilterChain:de,text:$,getNumericAspectRatioFromString:qr},views:{fileActionButton:Qr}});xi(t.options)},Vl=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",Hl=()=>"Promise"in window,ql=()=>"slice"in Blob.prototype,Wl=()=>"URL"in window&&"createObjectURL"in window.URL,kl=()=>"visibilityState"in document,$l=()=>"performance"in window,Yl=()=>"supports"in(window.CSS||{}),zl=()=>/MSIE|Trident/.test(window.navigator.userAgent),dr=(()=>{const e=Nr()&&!Vl()&&kl()&&Hl()&&ql()&&Wl()&&$l()&&(Yl()||zl());return()=>e})(),Oe={apps:[]},Xl="filepond",Ce=()=>{};let fr={},ft=Ce,qt=Ce,Er=Ce,pr=Ce,nn=Ce,hr=Ce,mr=Ce;if(dr()){pi(()=>{Oe.apps.forEach(n=>n._read())},n=>{Oe.apps.forEach(r=>r._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:dr,create:ft,destroy:qt,parse:Er,find:pr,registerPlugin:nn,setOptions:mr}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>W(_t(),(n,r)=>{fr[n]=r[1]});fr={},t(),ft=(...n)=>{const r=Nl(...n);return r.on("destroy",qt),Oe.apps.push(r),cr(r)},qt=n=>{const r=Oe.apps.findIndex(s=>s.isAttachedTo(n));return r>=0?(Oe.apps.splice(r,1)[0].restoreElement(),!0):!1},Er=n=>Array.from(n.querySelectorAll(`.${Xl}`)).filter(o=>!Oe.apps.find(i=>i.isAttachedTo(o))).map(o=>ft(o)),pr=n=>{const r=Oe.apps.find(s=>s.isAttachedTo(n));return r?cr(r):null},nn=(...n)=>{n.forEach(Bl),t()},hr=()=>{const n={};return W(_t(),(r,s)=>{n[r]=s[0]}),n},mr=n=>(Q(n)&&(Oe.apps.forEach(r=>{r.setOptions(n)}),Ui(n)),hr())}/*!
 * FilePondPluginImagePreview 4.6.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const jl=e=>/^image/.test(e.type),Ir=(e,t)=>Qe(e.x*t,e.y*t),_r=(e,t)=>Qe(e.x+t.x,e.y+t.y),Ql=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:Qe(e.x/t,e.y/t)},ct=(e,t,n)=>{const r=Math.cos(t),s=Math.sin(t),o=Qe(e.x-n.x,e.y-n.y);return Qe(n.x+r*o.x-s*o.y,n.y+s*o.x+r*o.y)},Qe=(e=0,t=0)=>({x:e,y:t}),re=(e,t,n=1,r)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(r?t[r]:Math.min(t.width,t.height))},Kl=(e,t,n)=>{const r=e.borderStyle||e.lineStyle||"solid",s=e.backgroundColor||e.fontColor||"transparent",o=e.borderColor||e.lineColor||"transparent",i=re(e.borderWidth||e.lineWidth,t,n),a=e.lineCap||"round",l=e.lineJoin||"round",c=typeof r=="string"?"":r.map(f=>re(f,t,n)).join(","),u=e.opacity||1;return{"stroke-linecap":a,"stroke-linejoin":l,"stroke-width":i||0,"stroke-dasharray":c,stroke:o,fill:s,opacity:u}},ae=e=>e!=null,Zl=(e,t,n=1)=>{let r=re(e.x,t,n,"width")||re(e.left,t,n,"width"),s=re(e.y,t,n,"height")||re(e.top,t,n,"height"),o=re(e.width,t,n,"width"),i=re(e.height,t,n,"height"),a=re(e.right,t,n,"width"),l=re(e.bottom,t,n,"height");return ae(s)||(ae(i)&&ae(l)?s=t.height-i-l:s=l),ae(r)||(ae(o)&&ae(a)?r=t.width-o-a:r=a),ae(o)||(ae(r)&&ae(a)?o=t.width-r-a:o=0),ae(i)||(ae(s)&&ae(l)?i=t.height-s-l:i=0),{x:r||0,y:s||0,width:o||0,height:i||0}},Jl=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),he=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),ec="http://www.w3.org/2000/svg",xe=(e,t)=>{const n=document.createElementNS(ec,e);return t&&he(n,t),n},tc=e=>he(e,{...e.rect,...e.styles}),nc=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,r=e.rect.width*.5,s=e.rect.height*.5;return he(e,{cx:t,cy:n,rx:r,ry:s,...e.styles})},rc={contain:"xMidYMid meet",cover:"xMidYMid slice"},sc=(e,t)=>{he(e,{...e.rect,...e.styles,preserveAspectRatio:rc[t.fit]||"none"})},ic={left:"start",center:"middle",right:"end"},oc=(e,t,n,r)=>{const s=re(t.fontSize,n,r),o=t.fontFamily||"sans-serif",i=t.fontWeight||"normal",a=ic[t.textAlign]||"start";he(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":i,"font-size":s,"font-family":o,"text-anchor":a}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},ac=(e,t,n,r)=>{he(e,{...e.rect,...e.styles,fill:"none"});const s=e.childNodes[0],o=e.childNodes[1],i=e.childNodes[2],a=e.rect,l={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(he(s,{x1:a.x,y1:a.y,x2:l.x,y2:l.y}),!t.lineDecoration)return;o.style.display="none",i.style.display="none";const c=Ql({x:l.x-a.x,y:l.y-a.y}),u=re(.05,n,r);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const f=Ir(c,u),h=_r(a,f),m=ct(a,2,h),d=ct(a,-2,h);he(o,{style:"display:block;",d:`M${m.x},${m.y} L${a.x},${a.y} L${d.x},${d.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const f=Ir(c,-u),h=_r(l,f),m=ct(l,2,h),d=ct(l,-2,h);he(i,{style:"display:block;",d:`M${m.x},${m.y} L${l.x},${l.y} L${d.x},${d.y}`})}},lc=(e,t,n,r)=>{he(e,{...e.styles,fill:"none",d:Jl(t.points.map(s=>({x:re(s.x,n,r,"width"),y:re(s.y,n,r,"height")})))})},ut=e=>t=>xe(e,{id:t.id}),cc=e=>{const t=xe("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},uc=e=>{const t=xe("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=xe("line");t.appendChild(n);const r=xe("path");t.appendChild(r);const s=xe("path");return t.appendChild(s),t},dc={image:cc,rect:ut("rect"),ellipse:ut("ellipse"),text:ut("text"),path:ut("path"),line:uc},fc={rect:tc,ellipse:nc,image:sc,text:oc,path:lc,line:ac},Ec=(e,t)=>dc[e](t),pc=(e,t,n,r,s)=>{t!=="path"&&(e.rect=Zl(n,r,s)),e.styles=Kl(n,r,s),fc[t](e,n,r,s)},hc=["x","y","left","top","right","bottom","width","height"],mc=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,Ic=e=>{const[t,n]=e,r=n.points?{}:hc.reduce((s,o)=>(s[o]=mc(n[o]),s),{});return[t,{zIndex:0,...n,...r}]},_c=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,gc=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:n})=>{if(!n.dirty)return;const{crop:r,resize:s,markup:o}=n,i=n.width,a=n.height;let l=r.width,c=r.height;if(s){const{size:m}=s;let d=m&&m.width,p=m&&m.height;const _=s.mode,T=s.upscale;d&&!p&&(p=d),p&&!d&&(d=p);const E=l<d&&c<p;if(!E||E&&T){let I=d/l,y=p/c;if(_==="force")l=d,c=p;else{let S;_==="cover"?S=Math.max(I,y):_==="contain"&&(S=Math.min(I,y)),l=l*S,c=c*S}}}const u={width:i,height:a};t.element.setAttribute("width",u.width),t.element.setAttribute("height",u.height);const f=Math.min(i/l,a/c);t.element.innerHTML="";const h=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");o.filter(h).map(Ic).sort(_c).forEach(m=>{const[d,p]=m,_=Ec(d,p);pc(_,d,p,u,f),t.element.appendChild(_)})}}),je=(e,t)=>({x:e,y:t}),Tc=(e,t)=>e.x*t.x+e.y*t.y,gr=(e,t)=>je(e.x-t.x,e.y-t.y),Rc=(e,t)=>Tc(gr(e,t),gr(e,t)),Tr=(e,t)=>Math.sqrt(Rc(e,t)),Rr=(e,t)=>{const n=e,r=1.5707963267948966,s=t,o=1.5707963267948966-t,i=Math.sin(r),a=Math.sin(s),l=Math.sin(o),c=Math.cos(o),u=n/i,f=u*a,h=u*l;return je(c*f,c*h)},Oc=(e,t)=>{const n=e.width,r=e.height,s=Rr(n,t),o=Rr(r,t),i=je(e.x+Math.abs(s.x),e.y-Math.abs(s.y)),a=je(e.x+e.width+Math.abs(o.y),e.y+Math.abs(o.x)),l=je(e.x-Math.abs(o.y),e.y+e.height-Math.abs(o.x));return{width:Tr(i,a),height:Tr(i,l)}},yc=(e,t,n=1)=>{const r=e.height/e.width;let s=1,o=t,i=1,a=r;a>o&&(a=o,i=a/r);const l=Math.max(s/i,o/a),c=e.width/(n*l*i),u=c*t;return{width:c,height:u}},gs=(e,t,n,r)=>{const s=r.x>.5?1-r.x:r.x,o=r.y>.5?1-r.y:r.y,i=s*2*e.width,a=o*2*e.height,l=Oc(t,n);return Math.max(l.width/i,l.height/a)},Ts=(e,t)=>{let n=e.width,r=n*t;r>e.height&&(r=e.height,n=r/t);const s=(e.width-n)*.5,o=(e.height-r)*.5;return{x:s,y:o,width:n,height:r}},Sc=(e,t={})=>{let{zoom:n,rotation:r,center:s,aspectRatio:o}=t;o||(o=e.height/e.width);const i=yc(e,o,n),a={x:i.width*.5,y:i.height*.5},l={x:0,y:0,width:i.width,height:i.height,center:a},c=typeof t.scaleToFit>"u"||t.scaleToFit,u=gs(e,Ts(l,o),r,c?s:{x:.5,y:.5}),f=n*u;return{widthFloat:i.width/f,heightFloat:i.height/f,width:Math.round(i.width/f),height:Math.round(i.height/f)}},pe={type:"spring",stiffness:.5,damping:.45,mass:10},Dc=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:n})=>{t.appendChild(n.image)}}),Ac=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:pe,originY:pe,scaleX:pe,scaleY:pe,translateX:pe,translateY:pe,rotateZ:pe}},create:({root:t,props:n})=>{n.width=n.image.width,n.height=n.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(Dc(e),{image:n.image}))},write:({root:t,props:n})=>{const{flip:r}=n.crop,{bitmap:s}=t.ref;s.scaleX=r.horizontal?-1:1,s.scaleY=r.vertical?-1:1}}),wc=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:n}){n.background&&(t.element.style.backgroundColor=n.background)},create:({root:t,props:n})=>{t.ref.image=t.appendChildView(t.createChildView(Ac(e),Object.assign({},n))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(gc(e),Object.assign({},n))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const r=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");r!==null&&(r==="grid"?t.element.dataset.transparencyIndicator=r:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:n,shouldOptimize:r})=>{const{crop:s,markup:o,resize:i,dirty:a,width:l,height:c}=n;t.ref.image.crop=s;const u={x:0,y:0,width:l,height:c,center:{x:l*.5,y:c*.5}},f={width:t.ref.image.width,height:t.ref.image.height},h={x:s.center.x*f.width,y:s.center.y*f.height},m={x:u.center.x-f.width*s.center.x,y:u.center.y-f.height*s.center.y},d=Math.PI*2+s.rotation%(Math.PI*2),p=s.aspectRatio||f.height/f.width,_=typeof s.scaleToFit>"u"||s.scaleToFit,T=gs(f,Ts(u,p),d,_?s.center:{x:.5,y:.5}),E=s.zoom*T;o&&o.length?(t.ref.createMarkup(),t.ref.markup.width=l,t.ref.markup.height=c,t.ref.markup.resize=i,t.ref.markup.dirty=a,t.ref.markup.markup=o,t.ref.markup.crop=Sc(f,s)):t.ref.markup&&t.ref.destroyMarkup();const I=t.ref.image;if(r){I.originX=null,I.originY=null,I.translateX=null,I.translateY=null,I.rotateZ=null,I.scaleX=null,I.scaleY=null;return}I.originX=h.x,I.originY=h.y,I.translateX=m.x,I.translateY=m.y,I.rotateZ=d,I.scaleX=E,I.scaleY=E}}),Pc=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:pe,scaleY:pe,translateY:pe,opacity:{type:"tween",duration:400}}},create:({root:t,props:n})=>{t.ref.clip=t.appendChildView(t.createChildView(wc(e),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:({root:t,props:n,shouldOptimize:r})=>{const{clip:s}=t.ref,{image:o,crop:i,markup:a,resize:l,dirty:c}=n;if(s.crop=i,s.markup=a,s.resize=l,s.dirty=c,s.opacity=r?0:1,r||t.rect.element.hidden)return;const u=o.height/o.width;let f=i.aspectRatio||u;const h=t.rect.inner.width,m=t.rect.inner.height;let d=t.query("GET_IMAGE_PREVIEW_HEIGHT");const p=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),_=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),T=t.query("GET_PANEL_ASPECT_RATIO"),E=t.query("GET_ALLOW_MULTIPLE");T&&!E&&(d=h*T,f=T);let I=d!==null?d:Math.max(p,Math.min(h*f,_)),y=I/f;y>h&&(y=h,I=y*f),I>m&&(I=m,y=m/f),s.width=y,s.height=I}});let bc=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,Or=0;const Mc=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:n})=>{let r=bc;if(document.querySelector("base")){const s=new URL(window.location.href.replace(window.location.hash,"")).href;r=r.replace(/url\(\#/g,"url("+s+"#")}Or++,t.element.classList.add(`filepond--image-preview-overlay-${n.status}`),t.element.innerHTML=r.replace(/__UID__/g,Or)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),Lc=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},Cc=function(){self.onmessage=e=>{const t=e.data.message.imageData,n=e.data.message.colorMatrix,r=t.data,s=r.length,o=n[0],i=n[1],a=n[2],l=n[3],c=n[4],u=n[5],f=n[6],h=n[7],m=n[8],d=n[9],p=n[10],_=n[11],T=n[12],E=n[13],I=n[14],y=n[15],S=n[16],b=n[17],v=n[18],D=n[19];let P=0,G=0,M=0,L=0,H=0;for(;P<s;P+=4)G=r[P]/255,M=r[P+1]/255,L=r[P+2]/255,H=r[P+3]/255,r[P]=Math.max(0,Math.min((G*o+M*i+L*a+H*l+c)*255,255)),r[P+1]=Math.max(0,Math.min((G*u+M*f+L*h+H*m+d)*255,255)),r[P+2]=Math.max(0,Math.min((G*p+M*_+L*T+H*E+I)*255,255)),r[P+3]=Math.max(0,Math.min((G*y+M*S+L*b+H*v+D)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},Nc=(e,t)=>{let n=new Image;n.onload=()=>{const r=n.naturalWidth,s=n.naturalHeight;n=null,t(r,s)},n.src=e},vc={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},Gc=(e,t,n,r)=>{r!==-1&&e.transform.apply(e,vc[r](t,n))},Fc=(e,t,n,r)=>{t=Math.round(t),n=Math.round(n);const s=document.createElement("canvas");s.width=t,s.height=n;const o=s.getContext("2d");return r>=5&&r<=8&&([t,n]=[n,t]),Gc(o,t,n,r),o.drawImage(e,0,0,t,n),s},Rs=e=>/^image/.test(e.type)&&!/svg/.test(e.type),xc=10,Uc=10,Bc=e=>{const t=Math.min(xc/e.width,Uc/e.height),n=document.createElement("canvas"),r=n.getContext("2d"),s=n.width=Math.ceil(e.width*t),o=n.height=Math.ceil(e.height*t);r.drawImage(e,0,0,s,o);let i=null;try{i=r.getImageData(0,0,s,o).data}catch{return null}const a=i.length;let l=0,c=0,u=0,f=0;for(;f<a;f+=4)l+=i[f]*i[f],c+=i[f+1]*i[f+1],u+=i[f+2]*i[f+2];return l=Wt(l,a),c=Wt(c,a),u=Wt(u,a),{r:l,g:c,b:u}},Wt=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),Vc=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),Hc=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},qc=e=>new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>{t(r)},r.onerror=s=>{n(s)},r.src=e}),Wc=e=>{const t=Mc(e),n=Pc(e),{createWorker:r}=e.utils,s=(E,I,y)=>new Promise(S=>{E.ref.imageData||(E.ref.imageData=y.getContext("2d").getImageData(0,0,y.width,y.height));const b=Hc(E.ref.imageData);if(!I||I.length!==20)return y.getContext("2d").putImageData(b,0,0),S();const v=r(Cc);v.post({imageData:b,colorMatrix:I},D=>{y.getContext("2d").putImageData(D,0,0),v.terminate(),S()},[b.data.buffer])}),o=(E,I)=>{E.removeChildView(I),I.image.width=1,I.image.height=1,I._destroy()},i=({root:E})=>{const I=E.ref.images.shift();return I.opacity=0,I.translateY=-15,E.ref.imageViewBin.push(I),I},a=({root:E,props:I,image:y})=>{const S=I.id,b=E.query("GET_ITEM",{id:S});if(!b)return;const v=b.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},D=E.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let P,G,M=!1;E.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(P=b.getMetadata("markup")||[],G=b.getMetadata("resize"),M=!0);const L=E.appendChildView(E.createChildView(n,{id:S,image:y,crop:v,resize:G,markup:P,dirty:M,background:D,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),E.childViews.length);E.ref.images.push(L),L.opacity=1,L.scaleX=1,L.scaleY=1,L.translateY=0,setTimeout(()=>{E.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:S})},250)},l=({root:E,props:I})=>{const y=E.query("GET_ITEM",{id:I.id});if(!y)return;const S=E.ref.images[E.ref.images.length-1];S.crop=y.getMetadata("crop"),S.background=E.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),E.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(S.dirty=!0,S.resize=y.getMetadata("resize"),S.markup=y.getMetadata("markup"))},c=({root:E,props:I,action:y})=>{if(!/crop|filter|markup|resize/.test(y.change.key)||!E.ref.images.length)return;const S=E.query("GET_ITEM",{id:I.id});if(S){if(/filter/.test(y.change.key)){const b=E.ref.images[E.ref.images.length-1];s(E,y.change.value,b.image);return}if(/crop|markup|resize/.test(y.change.key)){const b=S.getMetadata("crop"),v=E.ref.images[E.ref.images.length-1];if(b&&b.aspectRatio&&v.crop&&v.crop.aspectRatio&&Math.abs(b.aspectRatio-v.crop.aspectRatio)>1e-5){const D=i({root:E});a({root:E,props:I,image:Vc(D.image)})}else l({root:E,props:I})}}},u=E=>{const y=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return(y?parseInt(y[1]):null)<=58?!1:"createImageBitmap"in window&&Rs(E)},f=({root:E,props:I})=>{const{id:y}=I,S=E.query("GET_ITEM",y);if(!S)return;const b=URL.createObjectURL(S.file);Nc(b,(v,D)=>{E.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:y,width:v,height:D})})},h=({root:E,props:I})=>{const{id:y}=I,S=E.query("GET_ITEM",y);if(!S)return;const b=URL.createObjectURL(S.file),v=()=>{qc(b).then(D)},D=P=>{URL.revokeObjectURL(b);const M=(S.getMetadata("exif")||{}).orientation||-1;let{width:L,height:H}=P;if(!L||!H)return;M>=5&&M<=8&&([L,H]=[H,L]);const w=Math.max(1,window.devicePixelRatio*.75),O=E.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*w,A=H/L,C=E.rect.element.width,N=E.rect.element.height;let U=C,q=U*A;A>1?(U=Math.min(L,C*O),q=U*A):(q=Math.min(H,N*O),U=q/A);const Ne=Fc(P,U,q,M),tt=()=>{const Gt=E.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?Bc(data):null;S.setMetadata("color",Gt,!0),"close"in P&&P.close(),E.ref.overlayShadow.opacity=1,a({root:E,props:I,image:Ne})},ue=S.getMetadata("filter");ue?s(E,ue,Ne).then(tt):tt()};if(u(S.file)){const P=r(Lc);P.post({file:S.file},G=>{if(P.terminate(),!G){v();return}D(G)})}else v()},m=({root:E})=>{const I=E.ref.images[E.ref.images.length-1];I.translateY=0,I.scaleX=1,I.scaleY=1,I.opacity=1},d=({root:E})=>{E.ref.overlayShadow.opacity=1,E.ref.overlayError.opacity=0,E.ref.overlaySuccess.opacity=0},p=({root:E})=>{E.ref.overlayShadow.opacity=.25,E.ref.overlayError.opacity=1},_=({root:E})=>{E.ref.overlayShadow.opacity=.25,E.ref.overlaySuccess.opacity=1},T=({root:E})=>{E.ref.images=[],E.ref.imageData=null,E.ref.imageViewBin=[],E.ref.overlayShadow=E.appendChildView(E.createChildView(t,{opacity:0,status:"idle"})),E.ref.overlaySuccess=E.appendChildView(E.createChildView(t,{opacity:0,status:"success"})),E.ref.overlayError=E.appendChildView(E.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:T,styles:["height"],apis:["height"],destroy:({root:E})=>{E.ref.images.forEach(I=>{I.image.width=1,I.image.height=1})},didWriteView:({root:E})=>{E.ref.images.forEach(I=>{I.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:m,DID_IMAGE_PREVIEW_CONTAINER_CREATE:f,DID_FINISH_CALCULATE_PREVIEWSIZE:h,DID_UPDATE_ITEM_METADATA:c,DID_THROW_ITEM_LOAD_ERROR:p,DID_THROW_ITEM_PROCESSING_ERROR:p,DID_THROW_ITEM_INVALID:p,DID_COMPLETE_ITEM_PROCESSING:_,DID_START_ITEM_PROCESSING:d,DID_REVERT_ITEM_PROCESSING:d},({root:E})=>{const I=E.ref.imageViewBin.filter(y=>y.opacity===0);E.ref.imageViewBin=E.ref.imageViewBin.filter(y=>y.opacity>0),I.forEach(y=>o(E,y)),I.length=0})})},Os=e=>{const{addFilter:t,utils:n}=e,{Type:r,createRoute:s,isFile:o}=n,i=Wc(e);return t("CREATE_VIEW",a=>{const{is:l,view:c,query:u}=a;if(!l("file")||!u("GET_ALLOW_IMAGE_PREVIEW"))return;const f=({root:_,props:T})=>{const{id:E}=T,I=u("GET_ITEM",E);if(!I||!o(I.file)||I.archived)return;const y=I.file;if(!jl(y)||!u("GET_IMAGE_PREVIEW_FILTER_ITEM")(I))return;const S="createImageBitmap"in(window||{}),b=u("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!S&&b&&y.size>b)return;_.ref.imagePreview=c.appendChildView(c.createChildView(i,{id:E}));const v=_.query("GET_IMAGE_PREVIEW_HEIGHT");v&&_.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:I.id,height:v});const D=!S&&y.size>u("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");_.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:E},D)},h=(_,T)=>{if(!_.ref.imagePreview)return;let{id:E}=T;const I=_.query("GET_ITEM",{id:E});if(!I)return;const y=_.query("GET_PANEL_ASPECT_RATIO"),S=_.query("GET_ITEM_PANEL_ASPECT_RATIO"),b=_.query("GET_IMAGE_PREVIEW_HEIGHT");if(y||S||b)return;let{imageWidth:v,imageHeight:D}=_.ref;if(!v||!D)return;const P=_.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),G=_.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),L=(I.getMetadata("exif")||{}).orientation||-1;if(L>=5&&L<=8&&([v,D]=[D,v]),!Rs(I.file)||_.query("GET_IMAGE_PREVIEW_UPSCALE")){const C=2048/v;v*=C,D*=C}const H=D/v,w=(I.getMetadata("crop")||{}).aspectRatio||H;let x=Math.max(P,Math.min(D,G));const O=_.rect.element.width,A=Math.min(O*w,x);_.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:I.id,height:A})},m=({root:_})=>{_.ref.shouldRescale=!0},d=({root:_,action:T})=>{T.change.key==="crop"&&(_.ref.shouldRescale=!0)},p=({root:_,action:T})=>{_.ref.imageWidth=T.width,_.ref.imageHeight=T.height,_.ref.shouldRescale=!0,_.ref.shouldDrawPreview=!0,_.dispatch("KICK")};c.registerWriter(s({DID_RESIZE_ROOT:m,DID_STOP_RESIZE:m,DID_LOAD_ITEM:f,DID_IMAGE_PREVIEW_CALCULATE_SIZE:p,DID_UPDATE_ITEM_METADATA:d},({root:_,props:T})=>{_.ref.imagePreview&&(_.rect.element.hidden||(_.ref.shouldRescale&&(h(_,T),_.ref.shouldRescale=!1),_.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{_.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:T.id})})}),_.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,r.BOOLEAN],imagePreviewFilterItem:[()=>!0,r.FUNCTION],imagePreviewHeight:[null,r.INT],imagePreviewMinHeight:[44,r.INT],imagePreviewMaxHeight:[256,r.INT],imagePreviewMaxFileSize:[null,r.INT],imagePreviewZoomFactor:[2,r.INT],imagePreviewUpscale:[!1,r.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,r.INT],imagePreviewTransparencyIndicator:[null,r.STRING],imagePreviewCalculateAverageImageColor:[!1,r.BOOLEAN],imagePreviewMarkupShow:[!0,r.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,r.FUNCTION]}}},kc=typeof window<"u"&&typeof window.document<"u";kc&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Os}));function ys(e,t){return function(){return e.apply(t,arguments)}}const{toString:$c}=Object.prototype,{getPrototypeOf:Rn}=Object,bt=(e=>t=>{const n=$c.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ie=e=>(e=e.toLowerCase(),t=>bt(t)===e),Mt=e=>t=>typeof t===e,{isArray:We}=Array,Ke=Mt("undefined");function Yc(e){return e!==null&&!Ke(e)&&e.constructor!==null&&!Ke(e.constructor)&&ce(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ss=Ie("ArrayBuffer");function zc(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ss(e.buffer),t}const Xc=Mt("string"),ce=Mt("function"),Ds=Mt("number"),Lt=e=>e!==null&&typeof e=="object",jc=e=>e===!0||e===!1,Et=e=>{if(bt(e)!=="object")return!1;const t=Rn(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Qc=Ie("Date"),Kc=Ie("File"),Zc=Ie("Blob"),Jc=Ie("FileList"),eu=e=>Lt(e)&&ce(e.pipe),tu=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ce(e.append)&&((t=bt(e))==="formdata"||t==="object"&&ce(e.toString)&&e.toString()==="[object FormData]"))},nu=Ie("URLSearchParams"),ru=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Je(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),We(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let a;for(r=0;r<i;r++)a=o[r],t.call(null,e[a],a,e)}}function As(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const ws=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Ps=e=>!Ke(e)&&e!==ws;function rn(){const{caseless:e}=Ps(this)&&this||{},t={},n=(r,s)=>{const o=e&&As(t,s)||s;Et(t[o])&&Et(r)?t[o]=rn(t[o],r):Et(r)?t[o]=rn({},r):We(r)?t[o]=r.slice():t[o]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Je(arguments[r],n);return t}const su=(e,t,n,{allOwnKeys:r}={})=>(Je(t,(s,o)=>{n&&ce(s)?e[o]=ys(s,n):e[o]=s},{allOwnKeys:r}),e),iu=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ou=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},au=(e,t,n,r)=>{let s,o,i;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)i=s[o],(!r||r(i,e,t))&&!a[i]&&(t[i]=e[i],a[i]=!0);e=n!==!1&&Rn(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},lu=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},cu=e=>{if(!e)return null;if(We(e))return e;let t=e.length;if(!Ds(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},uu=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Rn(Uint8Array)),du=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=r.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},fu=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Eu=Ie("HTMLFormElement"),pu=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),yr=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),hu=Ie("RegExp"),bs=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Je(n,(s,o)=>{t(s,o,e)!==!1&&(r[o]=s)}),Object.defineProperties(e,r)},mu=e=>{bs(e,(t,n)=>{if(ce(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(ce(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Iu=(e,t)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return We(e)?r(e):r(String(e).split(t)),n},_u=()=>{},gu=(e,t)=>(e=+e,Number.isFinite(e)?e:t),kt="abcdefghijklmnopqrstuvwxyz",Sr="0123456789",Ms={DIGIT:Sr,ALPHA:kt,ALPHA_DIGIT:kt+kt.toUpperCase()+Sr},Tu=(e=16,t=Ms.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function Ru(e){return!!(e&&ce(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Ou=e=>{const t=new Array(10),n=(r,s)=>{if(Lt(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const o=We(r)?[]:{};return Je(r,(i,a)=>{const l=n(i,s+1);!Ke(l)&&(o[a]=l)}),t[s]=void 0,o}}return r};return n(e,0)},yu=Ie("AsyncFunction"),Su=e=>e&&(Lt(e)||ce(e))&&ce(e.then)&&ce(e.catch),g={isArray:We,isArrayBuffer:Ss,isBuffer:Yc,isFormData:tu,isArrayBufferView:zc,isString:Xc,isNumber:Ds,isBoolean:jc,isObject:Lt,isPlainObject:Et,isUndefined:Ke,isDate:Qc,isFile:Kc,isBlob:Zc,isRegExp:hu,isFunction:ce,isStream:eu,isURLSearchParams:nu,isTypedArray:uu,isFileList:Jc,forEach:Je,merge:rn,extend:su,trim:ru,stripBOM:iu,inherits:ou,toFlatObject:au,kindOf:bt,kindOfTest:Ie,endsWith:lu,toArray:cu,forEachEntry:du,matchAll:fu,isHTMLForm:Eu,hasOwnProperty:yr,hasOwnProp:yr,reduceDescriptors:bs,freezeMethods:mu,toObjectSet:Iu,toCamelCase:pu,noop:_u,toFiniteNumber:gu,findKey:As,global:ws,isContextDefined:Ps,ALPHABET:Ms,generateString:Tu,isSpecCompliantForm:Ru,toJSONObject:Ou,isAsyncFn:yu,isThenable:Su};function V(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}g.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:g.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ls=V.prototype,Cs={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Cs[e]={value:e}});Object.defineProperties(V,Cs);Object.defineProperty(Ls,"isAxiosError",{value:!0});V.from=(e,t,n,r,s,o)=>{const i=Object.create(Ls);return g.toFlatObject(e,i,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),V.call(i,e.message,t,n,r,s),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const Du=null;function sn(e){return g.isPlainObject(e)||g.isArray(e)}function Ns(e){return g.endsWith(e,"[]")?e.slice(0,-2):e}function Dr(e,t,n){return e?e.concat(t).map(function(s,o){return s=Ns(s),!n&&o?"["+s+"]":s}).join(n?".":""):t}function Au(e){return g.isArray(e)&&!e.some(sn)}const wu=g.toFlatObject(g,{},null,function(t){return/^is[A-Z]/.test(t)});function Ct(e,t,n){if(!g.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=g.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,_){return!g.isUndefined(_[p])});const r=n.metaTokens,s=n.visitor||u,o=n.dots,i=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&g.isSpecCompliantForm(t);if(!g.isFunction(s))throw new TypeError("visitor must be a function");function c(d){if(d===null)return"";if(g.isDate(d))return d.toISOString();if(!l&&g.isBlob(d))throw new V("Blob is not supported. Use a Buffer instead.");return g.isArrayBuffer(d)||g.isTypedArray(d)?l&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function u(d,p,_){let T=d;if(d&&!_&&typeof d=="object"){if(g.endsWith(p,"{}"))p=r?p:p.slice(0,-2),d=JSON.stringify(d);else if(g.isArray(d)&&Au(d)||(g.isFileList(d)||g.endsWith(p,"[]"))&&(T=g.toArray(d)))return p=Ns(p),T.forEach(function(I,y){!(g.isUndefined(I)||I===null)&&t.append(i===!0?Dr([p],y,o):i===null?p:p+"[]",c(I))}),!1}return sn(d)?!0:(t.append(Dr(_,p,o),c(d)),!1)}const f=[],h=Object.assign(wu,{defaultVisitor:u,convertValue:c,isVisitable:sn});function m(d,p){if(!g.isUndefined(d)){if(f.indexOf(d)!==-1)throw Error("Circular reference detected in "+p.join("."));f.push(d),g.forEach(d,function(T,E){(!(g.isUndefined(T)||T===null)&&s.call(t,T,g.isString(E)?E.trim():E,p,h))===!0&&m(T,p?p.concat(E):[E])}),f.pop()}}if(!g.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Ar(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function On(e,t){this._pairs=[],e&&Ct(e,this,t)}const vs=On.prototype;vs.append=function(t,n){this._pairs.push([t,n])};vs.toString=function(t){const n=t?function(r){return t.call(this,r,Ar)}:Ar;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Pu(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Gs(e,t,n){if(!t)return e;const r=n&&n.encode||Pu,s=n&&n.serialize;let o;if(s?o=s(t,n):o=g.isURLSearchParams(t)?t.toString():new On(t,n).toString(r),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class bu{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){g.forEach(this.handlers,function(r){r!==null&&t(r)})}}const wr=bu,Fs={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Mu=typeof URLSearchParams<"u"?URLSearchParams:On,Lu=typeof FormData<"u"?FormData:null,Cu=typeof Blob<"u"?Blob:null,Nu=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),vu=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),me={isBrowser:!0,classes:{URLSearchParams:Mu,FormData:Lu,Blob:Cu},isStandardBrowserEnv:Nu,isStandardBrowserWebWorkerEnv:vu,protocols:["http","https","file","blob","url","data"]};function Gu(e,t){return Ct(e,new me.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,o){return me.isNode&&g.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function Fu(e){return g.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function xu(e){const t={},n=Object.keys(e);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],t[o]=e[o];return t}function xs(e){function t(n,r,s,o){let i=n[o++];const a=Number.isFinite(+i),l=o>=n.length;return i=!i&&g.isArray(s)?s.length:i,l?(g.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!a):((!s[i]||!g.isObject(s[i]))&&(s[i]=[]),t(n,r,s[i],o)&&g.isArray(s[i])&&(s[i]=xu(s[i])),!a)}if(g.isFormData(e)&&g.isFunction(e.entries)){const n={};return g.forEachEntry(e,(r,s)=>{t(Fu(r),s,n,0)}),n}return null}const Uu={"Content-Type":void 0};function Bu(e,t,n){if(g.isString(e))try{return(t||JSON.parse)(e),g.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Nt={transitional:Fs,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=g.isObject(t);if(o&&g.isHTMLForm(t)&&(t=new FormData(t)),g.isFormData(t))return s&&s?JSON.stringify(xs(t)):t;if(g.isArrayBuffer(t)||g.isBuffer(t)||g.isStream(t)||g.isFile(t)||g.isBlob(t))return t;if(g.isArrayBufferView(t))return t.buffer;if(g.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Gu(t,this.formSerializer).toString();if((a=g.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ct(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),Bu(t)):t}],transformResponse:[function(t){const n=this.transitional||Nt.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(t&&g.isString(t)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(i)throw a.name==="SyntaxError"?V.from(a,V.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:me.classes.FormData,Blob:me.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};g.forEach(["delete","get","head"],function(t){Nt.headers[t]={}});g.forEach(["post","put","patch"],function(t){Nt.headers[t]=g.merge(Uu)});const yn=Nt,Vu=g.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hu=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||t[n]&&Vu[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Pr=Symbol("internals");function ze(e){return e&&String(e).trim().toLowerCase()}function pt(e){return e===!1||e==null?e:g.isArray(e)?e.map(pt):String(e)}function qu(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Wu=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function $t(e,t,n,r,s){if(g.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!g.isString(t)){if(g.isString(r))return t.indexOf(r)!==-1;if(g.isRegExp(r))return r.test(t)}}function ku(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function $u(e,t){const n=g.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,o,i){return this[r].call(this,t,s,o,i)},configurable:!0})})}class vt{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function o(a,l,c){const u=ze(l);if(!u)throw new Error("header name must be a non-empty string");const f=g.findKey(s,u);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||l]=pt(a))}const i=(a,l)=>g.forEach(a,(c,u)=>o(c,u,l));return g.isPlainObject(t)||t instanceof this.constructor?i(t,n):g.isString(t)&&(t=t.trim())&&!Wu(t)?i(Hu(t),n):t!=null&&o(n,t,r),this}get(t,n){if(t=ze(t),t){const r=g.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return qu(s);if(g.isFunction(n))return n.call(this,s,r);if(g.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ze(t),t){const r=g.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||$t(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function o(i){if(i=ze(i),i){const a=g.findKey(r,i);a&&(!n||$t(r,r[a],a,n))&&(delete r[a],s=!0)}}return g.isArray(t)?t.forEach(o):o(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!t||$t(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const n=this,r={};return g.forEach(this,(s,o)=>{const i=g.findKey(r,o);if(i){n[i]=pt(s),delete n[o];return}const a=t?ku(o):String(o).trim();a!==o&&delete n[o],n[a]=pt(s),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return g.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&g.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[Pr]=this[Pr]={accessors:{}}).accessors,s=this.prototype;function o(i){const a=ze(i);r[a]||($u(s,i),r[a]=!0)}return g.isArray(t)?t.forEach(o):o(t),this}}vt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);g.freezeMethods(vt.prototype);g.freezeMethods(vt);const ge=vt;function Yt(e,t){const n=this||yn,r=t||n,s=ge.from(r.headers);let o=r.data;return g.forEach(e,function(a){o=a.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function Us(e){return!!(e&&e.__CANCEL__)}function et(e,t,n){V.call(this,e??"canceled",V.ERR_CANCELED,t,n),this.name="CanceledError"}g.inherits(et,V,{__CANCEL__:!0});function Yu(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new V("Request failed with status code "+n.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const zu=me.isStandardBrowserEnv?function(){return{write:function(n,r,s,o,i,a){const l=[];l.push(n+"="+encodeURIComponent(r)),g.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),g.isString(o)&&l.push("path="+o),g.isString(i)&&l.push("domain="+i),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Xu(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ju(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Bs(e,t){return e&&!Xu(t)?ju(e,t):t}const Qu=me.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(o){let i=o;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(i){const a=g.isString(i)?s(i):i;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function Ku(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Zu(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,o=0,i;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=r[o];i||(i=c),n[s]=l,r[s]=c;let f=o,h=0;for(;f!==s;)h+=n[f++],f=f%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-i<t)return;const m=u&&c-u;return m?Math.round(h*1e3/m):void 0}}function br(e,t){let n=0;const r=Zu(50,250);return s=>{const o=s.loaded,i=s.lengthComputable?s.total:void 0,a=o-n,l=r(a),c=o<=i;n=o;const u={loaded:o,total:i,progress:i?o/i:void 0,bytes:a,rate:l||void 0,estimated:l&&i&&c?(i-o)/l:void 0,event:s};u[t?"download":"upload"]=!0,e(u)}}const Ju=typeof XMLHttpRequest<"u",ed=Ju&&function(e){return new Promise(function(n,r){let s=e.data;const o=ge.from(e.headers).normalize(),i=e.responseType;let a;function l(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}g.isFormData(s)&&(me.isStandardBrowserEnv||me.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(e.auth){const m=e.auth.username||"",d=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(m+":"+d))}const u=Bs(e.baseURL,e.url);c.open(e.method.toUpperCase(),Gs(u,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function f(){if(!c)return;const m=ge.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),p={data:!i||i==="text"||i==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:m,config:e,request:c};Yu(function(T){n(T),l()},function(T){r(T),l()},p),c=null}if("onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(f)},c.onabort=function(){c&&(r(new V("Request aborted",V.ECONNABORTED,e,c)),c=null)},c.onerror=function(){r(new V("Network Error",V.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let d=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const p=e.transitional||Fs;e.timeoutErrorMessage&&(d=e.timeoutErrorMessage),r(new V(d,p.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,e,c)),c=null},me.isStandardBrowserEnv){const m=(e.withCredentials||Qu(u))&&e.xsrfCookieName&&zu.read(e.xsrfCookieName);m&&o.set(e.xsrfHeaderName,m)}s===void 0&&o.setContentType(null),"setRequestHeader"in c&&g.forEach(o.toJSON(),function(d,p){c.setRequestHeader(p,d)}),g.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),i&&i!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",br(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",br(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=m=>{c&&(r(!m||m.type?new et(null,e,c):m),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const h=Ku(u);if(h&&me.protocols.indexOf(h)===-1){r(new V("Unsupported protocol "+h+":",V.ERR_BAD_REQUEST,e));return}c.send(s||null)})},ht={http:Du,xhr:ed};g.forEach(ht,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const td={getAdapter:e=>{e=g.isArray(e)?e:[e];const{length:t}=e;let n,r;for(let s=0;s<t&&(n=e[s],!(r=g.isString(n)?ht[n.toLowerCase()]:n));s++);if(!r)throw r===!1?new V(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(g.hasOwnProp(ht,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!g.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:ht};function zt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new et(null,e)}function Mr(e){return zt(e),e.headers=ge.from(e.headers),e.data=Yt.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),td.getAdapter(e.adapter||yn.adapter)(e).then(function(r){return zt(e),r.data=Yt.call(e,e.transformResponse,r),r.headers=ge.from(r.headers),r},function(r){return Us(r)||(zt(e),r&&r.response&&(r.response.data=Yt.call(e,e.transformResponse,r.response),r.response.headers=ge.from(r.response.headers))),Promise.reject(r)})}const Lr=e=>e instanceof ge?e.toJSON():e;function He(e,t){t=t||{};const n={};function r(c,u,f){return g.isPlainObject(c)&&g.isPlainObject(u)?g.merge.call({caseless:f},c,u):g.isPlainObject(u)?g.merge({},u):g.isArray(u)?u.slice():u}function s(c,u,f){if(g.isUndefined(u)){if(!g.isUndefined(c))return r(void 0,c,f)}else return r(c,u,f)}function o(c,u){if(!g.isUndefined(u))return r(void 0,u)}function i(c,u){if(g.isUndefined(u)){if(!g.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,f){if(f in t)return r(c,u);if(f in e)return r(void 0,c)}const l={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(c,u)=>s(Lr(c),Lr(u),!0)};return g.forEach(Object.keys(Object.assign({},e,t)),function(u){const f=l[u]||s,h=f(e[u],t[u],u);g.isUndefined(h)&&f!==a||(n[u]=h)}),n}const Vs="1.4.0",Sn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Sn[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Cr={};Sn.transitional=function(t,n,r){function s(o,i){return"[Axios v"+Vs+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return(o,i,a)=>{if(t===!1)throw new V(s(i," has been removed"+(n?" in "+n:"")),V.ERR_DEPRECATED);return n&&!Cr[i]&&(Cr[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,i,a):!0}};function nd(e,t,n){if(typeof e!="object")throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const o=r[s],i=t[o];if(i){const a=e[o],l=a===void 0||i(a,o,e);if(l!==!0)throw new V("option "+o+" must be "+l,V.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new V("Unknown option "+o,V.ERR_BAD_OPTION)}}const on={assertOptions:nd,validators:Sn},ye=on.validators;class Rt{constructor(t){this.defaults=t,this.interceptors={request:new wr,response:new wr}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=He(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&on.assertOptions(r,{silentJSONParsing:ye.transitional(ye.boolean),forcedJSONParsing:ye.transitional(ye.boolean),clarifyTimeoutError:ye.transitional(ye.boolean)},!1),s!=null&&(g.isFunction(s)?n.paramsSerializer={serialize:s}:on.assertOptions(s,{encode:ye.function,serialize:ye.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i;i=o&&g.merge(o.common,o[n.method]),i&&g.forEach(["delete","get","head","post","put","patch","common"],d=>{delete o[d]}),n.headers=ge.concat(i,o);const a=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(l=l&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const c=[];this.interceptors.response.forEach(function(p){c.push(p.fulfilled,p.rejected)});let u,f=0,h;if(!l){const d=[Mr.bind(this),void 0];for(d.unshift.apply(d,a),d.push.apply(d,c),h=d.length,u=Promise.resolve(n);f<h;)u=u.then(d[f++],d[f++]);return u}h=a.length;let m=n;for(f=0;f<h;){const d=a[f++],p=a[f++];try{m=d(m)}catch(_){p.call(this,_);break}}try{u=Mr.call(this,m)}catch(d){return Promise.reject(d)}for(f=0,h=c.length;f<h;)u=u.then(c[f++],c[f++]);return u}getUri(t){t=He(this.defaults,t);const n=Bs(t.baseURL,t.url);return Gs(n,t.params,t.paramsSerializer)}}g.forEach(["delete","get","head","options"],function(t){Rt.prototype[t]=function(n,r){return this.request(He(r||{},{method:t,url:n,data:(r||{}).data}))}});g.forEach(["post","put","patch"],function(t){function n(r){return function(o,i,a){return this.request(He(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Rt.prototype[t]=n(),Rt.prototype[t+"Form"]=n(!0)});const mt=Rt;class Dn{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(a=>{r.subscribe(a),o=a}).then(s);return i.cancel=function(){r.unsubscribe(o)},i},t(function(o,i,a){r.reason||(r.reason=new et(o,i,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Dn(function(s){t=s}),cancel:t}}}const rd=Dn;function sd(e){return function(n){return e.apply(null,n)}}function id(e){return g.isObject(e)&&e.isAxiosError===!0}const an={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(an).forEach(([e,t])=>{an[t]=e});const od=an;function Hs(e){const t=new mt(e),n=ys(mt.prototype.request,t);return g.extend(n,mt.prototype,t,{allOwnKeys:!0}),g.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Hs(He(e,s))},n}const X=Hs(yn);X.Axios=mt;X.CanceledError=et;X.CancelToken=rd;X.isCancel=Us;X.VERSION=Vs;X.toFormData=Ct;X.AxiosError=V;X.Cancel=X.CanceledError;X.all=function(t){return Promise.all(t)};X.spread=sd;X.isAxiosError=id;X.mergeConfig=He;X.AxiosHeaders=ge;X.formToJSON=e=>xs(g.isHTMLForm(e)?new FormData(e):e);X.HttpStatusCode=od;X.default=X;const ad=X;window.axios=ad;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const ld=document.querySelector('input[type="file"].filepond'),cd=document.querySelector('meta[name="csrf-token"]').getAttribute("content");nn(Os);ft(ld).setOptions({server:{process:"./uploads/process",headers:{"X-CSRF-TOKEN":cd}},allowMultiple:!0});
